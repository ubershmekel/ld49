var M=Object.defineProperty;var C=(e,t,n)=>t in e?M(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var S=(e,t,n)=>(C(e,typeof t!="symbol"?t+"":t,n),n);import{M as o,s as q}from"./vendor.985111c7.js";const V=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerpolicy&&(r.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?r.credentials="include":s.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=n(s);fetch(s.href,r)}};V();function I(){return e=>e}const u=I()({width:1200,height:600,hasBounds:!0,wireframes:!1,background:"#75bbfd"}),L=[{name:"pointer",shape:"40 0, 40 30, 100 30, 100 70, 40 70, 40 100, 0 50",color:"#89fe05",price:1},{name:"chuvvy",shape:"120 0, 75 50, 120 100, 25 100, -20 50, 25 0",color:"#96f97b",price:1},{name:"star",shape:"50 0, 63 38, 100 38, 69 59, 82 100, 50 75, 18 100, 31 59, 0 38, 37 38",color:"#0343df",price:1},{name:"horseShoe",shape:"35 7, 19 17, 14 38, 14 58, 25 79, 45 85, 95 84, 95 66, 46 67, 34 59, 30 44, 33 29, 45 23, 95 23, 95 7, 53 7",color:"#ff81c0",price:1},{name:"1x1",shape:"0 0, 100 0, 100 100, 0 100",color:"#653700",price:1},{name:"quarter",shape:"0 0, 50 0, 50 50, 0 50",color:"#e50000",price:1},{name:"longnthicc",shape:"0 0, 250 0, 250 50, 0 50",color:"#029386",price:1},{name:"tri-tip",shape:"0 0, -50 -86.6, -100 0",color:"#c20078",price:1},{name:"noodle",shape:"0 0, 150 0, 150 25, 0 25",color:"#ffff14",price:1},{name:"Sir Patrick Stewart",shape:"0 0, 60 -50, 90 0, 50 -150",color:"#9a0eea",price:1},{name:"Little L",shape:"0 0, 100 0, 100 100, 50 100, 50 50, 0 50",color:"#d1b26f",price:1}],E=[];function T(e){const t=e.split(/[ ,]+/),n=[];for(let i=0;i<t.length;i+=2)n.push(o.Vector.create(+t[i],+t[i+1]));return n}function O(e){const t=o.Composite.allBodies(e.world);let n=0;const i=1e3;E.length=0;for(let s=0;s<i;s++){const r=u.height-s*100-100,l={x:0,y:r},f={x:800,y:r},d=o.Query.ray(t,l,f);let c=!1;for(const h of d){const y=h.bodyA;if(y.isStatic)continue;const p=1;if(y.velocity.x<p&&y.velocity.y<p){c=!0;break}}if(c)E.push([l,f]),n+=1;else break}return n}function F(e){o.Common.setDecomp(q);const t=[],n=5;for(const[r,l]of L.entries()){const f=T(l.shape),d=100+r%n*150,c=80-100*Math.floor(r/n),h=o.Bodies.fromVertices(d,c,[f],{render:{fillStyle:l.color,lineWidth:0}},!0);t.push(h)}const i=[o.Bodies.rectangle(0,600,2600,50,{isStatic:!0,render:{fillStyle:"#15b01a"}}),o.Bodies.rectangle(800,600,50,150,{isStatic:!0}),o.Bodies.rectangle(0,600,50,150,{isStatic:!0})];o.Composite.add(e.world,[...t,...i]);const s=t[0];s.render.fillStyle="red",s.velocity.x=-500,s.velocity.y=-1500}function z(){const e=o.Engine.create();return F(e),o.Events.on(e,"beforeUpdate",function(t){t.timestamp%5e3<50}),e}function k(){const e=window.document;return e.fullscreenElement&&e.fullscreenElement!==null||e.webkitFullscreenElement&&e.webkitFullscreenElement!==null||e.mozFullScreenElement&&e.mozFullScreenElement!==null||e.msFullscreenElement&&e.msFullscreenElement!==null}function R(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():console.warn("Did not find request full screen method",e)}function P(){const e=window.document;e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}window.toggleFullScreen=function(e){k()?P():R(e||document.body)};const D=document.getElementById("app");let b,g;function H(e){var t=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,i=t/e.options.width,s=n/e.options.height;e.context.setTransform(e.options.pixelRatio/i,0,0,e.options.pixelRatio/s,0,0),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)}function W(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)}function j(e){H(e);const t=e.context;for(const[n,i]of E)t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(i.x,i.y),t.strokeStyle="rgba(255,255,255,0.3)",t.lineWidth=3.5,t.stroke();W(e)}const m={min:{x:-100,y:-300},max:{x:1100,y:700}},N={x:u.width*.5,y:u.height*.5};function A(e,t,n){const i=o.Vector.magnitude(n);if(i<50)return;var s=o.Vector.normalise(n);const r=Math.min(10,Math.pow(i-50,2)*2e-4),l=o.Vector.mult(s,r);return e.bounds.min.x+l.x<m.min.x&&(l.x=m.min.x-e.bounds.min.x),e.bounds.max.x+l.x>m.max.x&&(l.x=m.max.x-e.bounds.max.x),e.bounds.min.y+l.y<m.min.y&&(l.y=m.min.y-e.bounds.min.y),e.bounds.max.y+l.y>m.max.y&&(l.y=m.max.y-e.bounds.max.y),o.Bounds.translate(e.bounds,l),o.Mouse.setOffset(t,e.bounds.min),l}async function U(e){const t=o.Render.create({engine:e,element:D,options:u});o.Render.run(t),console.log("render.canvas",t.canvas);var n=o.Mouse.create(t.canvas);let i=o.MouseConstraint.create(e,{mouse:n,constraint:{stiffness:.1,angularStiffness:.1,render:{}}});o.Composite.add(e.world,i),o.Events.on(i,"mousedown",()=>{console.log("touch");const x=document.getElementById("fullscreen-container");k()||R(x)});let s={x:0,y:u.height};o.Events.on(i,"mousemove",()=>{console.log("touch-move"),s=o.Vector.sub(n.absolute,N)});const r=.6,l=1.4;let d=.9,c={x:1,y:1};const h=document.getElementById("bank-label"),y=document.getElementById("height-label"),p=document.getElementById("earn-label");o.Events.on(t,"afterRender",()=>j(t)),o.Events.on(t,"beforeRender",function(){let x;var a=n.wheelDelta*-.1;a!==0&&(a<0&&c.x>=r||a>0&&c.x<=l)&&(d+=a),Math.abs(c.x-d)>.01&&(a=(d-c.x)*.2,c.x+=a,c.y+=a,t.bounds.max.x=t.bounds.min.x+u.width*c.x,t.bounds.max.y=t.bounds.min.y+u.height*c.y,x={x:u.width*a*-.5,y:u.height*a*-.5},o.Bounds.translate(t.bounds,x),o.Mouse.setScale(n,c),o.Mouse.setOffset(n,t.bounds.min)),x=A(t,n,s);const w=O(e),v=w*w;b.setEarn(v),h.textContent="bank: $"+b.getBank(),y.textContent="height: "+w,p.textContent="earn: $"+v});var B=o.Runner.create({isFixed:!0});o.Runner.run(B,e)}class Z{constructor(){S(this,"bankMoney",0);S(this,"earn",0)}setEarn(t){this.earn=t}cashOut(){this.bankMoney+=this.earn,o.Composite.allBodies(g.world).map(n=>{o.World.remove(g.world,n)}),F(g)}getBank(){return this.bankMoney}}function $(e){g=e,b=new Z,window._game=b,U(e)}window.addEventListener("load",()=>{const e=z();$(e)});
