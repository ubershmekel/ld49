var K=Object.defineProperty;var Y=(e,t,n)=>t in e?K(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var V=(e,t,n)=>(Y(e,typeof t!="symbol"?t+"":t,n),n);import{M as s,s as _}from"./vendor.985111c7.js";const Q=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}};Q();function X(){return e=>e}const g=X()({width:1200,height:600,hasBounds:!0,wireframes:!1,background:"#75bbfd"}),x=[{name:"skuer",shape:"0 0, 50 0, 50 50, 0 50",color:"#e50000",price:1},{name:"pointer",shape:"40 0, 40 30, 100 30, 100 70, 40 70, 40 100, 0 50",color:"#89fe05",price:1},{name:"chuvvy",shape:"120 0, 75 50, 120 100, 25 100, -20 50, 25 0",color:"#96f97b",price:1},{name:"mariobait",shape:"50 0, 63 38, 100 38, 69 59, 82 100, 50 75, 18 100, 31 59, 0 38, 37 38",color:"#0343df",price:1},{name:"horse-shoe",shape:"35 7, 19 17, 14 38, 14 58, 25 79, 45 85, 95 84, 95 66, 46 67, 34 59, 30 44, 33 29, 45 23, 95 23, 95 7, 53 7",color:"#ff81c0",price:1},{name:"tri-tip",shape:"0 0, -50 -86.6, -100 0",color:"#c20078",price:5},{name:"1x1",shape:"0 0, 100 0, 100 100, 0 100",color:"#653700",price:5},{name:"noodle",shape:"0 0, 150 0, 150 25, 0 25",color:"#ffff14",price:10},{name:"SirPatrickStewart",shape:"0 0, 60 -50, 90 0, 50 -150",color:"#9a0eea",price:10},{name:"Little L",shape:"0 0, 100 0, 100 100, 50 100, 50 50, 0 50",color:"#d1b26f",price:10},{name:"longnthicc",shape:"0 0, 250 0, 250 50, 0 50",color:"#029386",price:50},{name:"t-bone",shape:"0 0, 240 0, 240 -80, 160 -80, 160 -160, 80 -160, 80 -80, 0 -80",color:"#ffb07c",price:100},{name:"koko",shape:"0 0, 80 0, 80 -80, 240 -80, 240 0, 160 0, 160 80, 0 80",color:"#ff796c",price:100},{name:"Pig God",shape:"0 0, 240 0, 240 240, 0 240",color:"#001146",price:500}],b=[];function Z(e){const t=e.split(/[ ,]+/),n=[];for(let o=0;o<t.length;o+=2)n.push(s.Vector.create(+t[o],+t[o+1]));return n}function ee(e){const t=s.Composite.allBodies(e.world);let n=0;const o=1e3;b.length=0;for(let i=0;i<o;i++){const r=g.height-i*100-100,c={x:0,y:r},v={x:800,y:r},d=s.Query.ray(t,c,v);let T=!1;for(const z of d){const l=z.bodyA;if(l.isStatic)continue;const u=1;if(l.velocity.x<u&&l.velocity.y<u){T=!0;break}}if(T)b.push([c,v]),n+=1;else break}return n}function te(e){const t=[],n=5;for(const[o,i]of e.entries()){const r=Z(i.shape),c=100+o%n*150,v=80+160*Math.floor(o/n),d=s.Bodies.fromVertices(c,v,[r],{label:""+o,render:{fillStyle:i.color,lineWidth:0}},!0);t.push(d)}return t}function P(e,t){s.Common.setDecomp(_);const n=te(t),o=[s.Bodies.rectangle(0,600,2600,50,{isStatic:!0,render:{fillStyle:"#15b01a"}}),s.Bodies.rectangle(800,600,50,150,{isStatic:!0}),s.Bodies.rectangle(0,600,50,150,{isStatic:!0})];return s.Composite.add(e.world,[...n,...o]),{toyBodies:n,walls:o}}function ne(){const e=s.Engine.create();return P(e,x),s.Events.on(e,"beforeUpdate",function(t){t.timestamp%5e3<50}),e}function L(){const e=window.document;return e.fullscreenElement&&e.fullscreenElement!==null||e.webkitFullscreenElement&&e.webkitFullscreenElement!==null||e.mozFullScreenElement&&e.mozFullScreenElement!==null||e.msFullscreenElement&&e.msFullscreenElement!==null}function W(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():console.warn("Did not find request full screen method",e)}function oe(){const e=window.document;e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}window.toggleFullScreen=function(e){L()?oe():W(e||document.body)};var se="./assets/birds.cd8982a8.png",ie="./assets/fario.345c16a8.png",re="./assets/god.230c655b.png",ae="./assets/sun.ce27eed4.png";const ce=document.getElementById("app");let m,f,a,C;const M=[];let B={isFixed:!1,text:"$$$$",x:-1e3,y:0},F,w,E=null;const le={none:-1,left:0,middle:1,right:2};function ue(e){var t=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,o=t/e.options.width,i=n/e.options.height;e.context.setTransform(e.options.pixelRatio/o,0,0,e.options.pixelRatio/i,0,0),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)}function de(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)}function me(e){ue(e);const t=e.context;for(const[n,o]of b)t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(o.x,o.y),t.strokeStyle="rgba(255,255,255,0.3)",t.lineWidth=3.5,t.stroke();t.fillStyle="#fff",t.font="24px sans-serif",t.textAlign="center";for(const n of M)be(t,n.text,n.x,n.y);w&&w.image&&t.drawImage(w.image,w.x+Math.cos(Date.now()/100),w.y+Math.sin(Date.now()/100)),de(e)}const S={min:{x:-500,y:-600},max:{x:1200,y:700}},fe={x:g.width*.5,y:g.height*.5};function D(e,t){const n=1,o=s.Vector.mult(t,n);return e.bounds.min.x+o.x<S.min.x&&(o.x=S.min.x-e.bounds.min.x),e.bounds.max.x+o.x>S.max.x&&(o.x=S.max.x-e.bounds.max.x),e.bounds.min.y+o.y<S.min.y&&(o.y=S.min.y-e.bounds.min.y),e.bounds.max.y+o.y>S.max.y&&(o.y=S.max.y-e.bounds.max.y),s.Bounds.translate(e.bounds,o),o}const pe=.9;let p=pe;async function he(e){a=s.Render.create({engine:e,element:ce,options:g}),s.Render.run(a);var t=s.Mouse.create(a.canvas);let n=s.MouseConstraint.create(e,{mouse:t,constraint:{stiffness:.1,angularStiffness:.1,render:{}}});s.Composite.add(e.world,n);const o=document.getElementById("fullscreen-container");s.Events.on(n,"mousedown",()=>{i=s.Vector.clone(t.position),L()||W(o)}),s.Events.on(n,"mouseup",()=>{i=s.Vector.clone(t.position),i=null}),s.Events.on(n,"startdrag",l=>{const u=+l.body.label;E=x[u],C.startDrag(l)}),s.Events.on(n,"enddrag",l=>{E=null,C.endDrag(l)});let i=t.position,r=e.timing.timestamp;D(a,{x:-650,y:-100}),s.Events.on(n,"mousemove",l=>{const u=e.timing.timestamp-r;if(t.button!=le.none){if(!l.source.body&&i&&u<100){const h=s.Vector.sub(i,t.position);s.Vector.magnitude(h)>60?console.log("too big panView, ignoring",h):D(a,h)}const k=s.Vector.sub(t.absolute,fe),R=s.Vector.magnitude(k);if(l.source.body&&R>150){const h=s.Vector.normalise(k),y=s.Vector.mult(h,3);D(a,y)}s.Mouse.setOffset(t,a.bounds.min)}i=s.Vector.clone(t.position),r=e.timing.timestamp});const c=.6,v=1.4;let d={x:1,y:1};const T=document.getElementById("bank-label");s.Events.on(a,"afterRender",()=>me(a)),s.Events.on(a,"beforeRender",function(){let l;var u=t.wheelDelta*-.1;p+=u,p>v&&(p=v),p<c&&(p=c),Math.abs(d.x-p)>.01&&(u=(p-d.x)*.2,d.x+=u,d.y+=u,a.bounds.max.x=a.bounds.min.x+g.width*d.x,a.bounds.max.y=a.bounds.min.y+g.height*d.y,l={x:g.width*u*-.5,y:g.height*u*-.5},s.Bounds.translate(a.bounds,l),s.Mouse.setScale(t,d),s.Mouse.setOffset(t,a.bounds.min));const k=ee(e),R=k*k*k,h=[G,H,A];if(m.setEarn(R),b.length>0){const y=b[b.length-1];if(B.x=y[0].x-10,B.y=y[0].y,B.text="$"+R+`
cash out`,F.position,s.Body.setPosition(F,{x:B.x,y:y[0].y+4}),b.length%3==0){const J=Math.floor(b.length/3-1)%h.length;w={image:h[J],x:y[0].x-200,y:y[0].y-64},E&&E.name==="mariobait"&&(w.image=j)}else w=void 0}T.textContent="bank: $"+m.getBank()});var z=s.Runner.create({isFixed:!0});s.Runner.run(z,e)}const O={bank:"bank",purchased:"purchased"},N="#666";function ye(e,t){t(e),e.parts.map(n=>{t(n)})}function I(e,t){ye(e,n=>{n.render.fillStyle=t})}class ${start(){}startDrag(t){}endDrag(t){}}function q(e){M.length=0,M.push({isFixed:!1,text:`Purchase blocks
Build a tower
Taller towers earn WAY more money
Cash out when your tower is ready
Repeat until you find god`,x:-200,y:0}),C=new e,C.start()}class ge extends ${start(){s.Composite.allBodies(f.world).map(o=>{s.World.remove(f.world,o)});const n=m.purchasedToys();P(f,n),B.x=-1e3,M.push(B),F=s.Bodies.rectangle(-1e3,200,100,50,{isSensor:!0,isStatic:!0,render:{fillStyle:"rgba(200, 200, 0, 0.5)",strokeStyle:"dbb40c",lineWidth:3}}),s.Composite.add(f.world,F)}startDrag({body:t}){t===F&&(console.log("cash out!",F.position.y),m.cashOut())}}function xe(){return f.world.bodies.filter(e=>!isNaN(+e.label))}function be(e,t,n,o){for(var i=e.measureText("M").width*1.2,r=t.split(`
`),c=0;c<r.length;++c)e.fillText(r[c],n,o),o+=i}class U extends ${start(){s.Composite.allBodies(f.world).map(o=>{s.World.remove(f.world,o)}),P(f,x).toyBodies.map(o=>{o.isStatic=!0;const i=+o.label;if(m.isPurchased(i))return;const r=x[i];m.getBank()<r.price&&s.World.remove(f.world,o),I(o,N)}),xe().map(o=>{const i=x[+o.label],r={text:i.name+`
$`+i.price,x:o.position.x,y:o.position.y+40,isFixed:!1};M.push(r)})}startDrag({body:t}){!E||I(t,E.color)}endDrag({body:t}){const n=+t.label,o=x[n];!o||(I(t,o.color),m.isPurchased(n)?q(ge):m.getBank()>=o.price?(m.buyToy(n),I(t,o.color)):I(t,N))}}const we=3;class Se{constructor(){V(this,"bankMoney",we);V(this,"earn",0);V(this,"purchased",[]);const t=localStorage.getItem(O.bank);t&&(this.bankMoney=+t);const n=localStorage.getItem(O.purchased);n&&(this.purchased=JSON.parse(n))}setEarn(t){this.earn=t}cashOut(){this.setBankMoney(this.bankMoney+this.earn),q(U)}setBankMoney(t){this.bankMoney=t;const n=this.bankMoney.toString();localStorage.setItem(O.bank,n)}buyToy(t){const n=x[t];this.setBankMoney(this.bankMoney-n.price),this.purchased.push(t),this.purchased=[...new Set(this.purchased)];const o=JSON.stringify(this.purchased);localStorage.setItem(O.purchased,o)}getBank(){return this.bankMoney}isPurchased(t){return this.purchased.indexOf(t)>=0}purchasedToys(){return this.purchased.map(t=>x[t])}zoomIn(){p+=.1}zoomOut(){p-=.1}}const A=new Image;A.src=re;const H=new Image;H.src=ae;const G=new Image;G.src=se;const j=new Image;j.src=ie;function ve(e){f=e,m=new Se,q(U),window._game=m,he(e)}window.addEventListener("load",()=>{const e=ne();ve(e)});
