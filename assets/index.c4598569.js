var X=Object.defineProperty;var Z=(e,t,o)=>t in e?X(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var D=(e,t,o)=>(Z(e,typeof t!="symbol"?t+"":t,o),o);import{m as n,d as ee,h as te}from"./vendor.b9efbc4b.js";const oe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerpolicy&&(i.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?i.credentials="include":r.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=o(r);fetch(r.href,i)}};oe();function se(){return e=>e}const y=se()({width:1200,height:600,hasBounds:!0,wireframes:!1,background:"#75bbfd"}),b=[{name:"skuer",shape:"0 0, 50 0, 50 50, 0 50",color:"#e50000",price:1,id:0},{name:"pointer",shape:"40 0, 40 30, 100 30, 100 70, 40 70, 40 100, 0 50",color:"#89fe05",price:1,id:1},{name:"chuvvy",shape:"120 0, 75 50, 120 100, 25 100, -20 50, 25 0",color:"#96f97b",price:1,id:2},{name:"mariobait",shape:"50 0, 63 38, 100 38, 69 59, 82 100, 50 75, 18 100, 31 59, 0 38, 37 38",color:"#0343df",price:1,id:3},{name:"horse-shoe",shape:"35 7, 19 17, 14 38, 14 58, 25 79, 45 85, 95 84, 95 66, 46 67, 34 59, 30 44, 33 29, 45 23, 95 23, 95 7, 53 7",color:"#ff81c0",price:1,id:4},{name:"tri-tip",shape:"0 0, -50 -86.6, -100 0",color:"#c20078",price:5,id:5},{name:"1x1",shape:"0 0, 100 0, 100 100, 0 100",color:"#653700",price:5,id:6},{name:"noodle",shape:"0 0, 150 0, 150 25, 0 25",color:"#ffff14",price:10,id:7},{name:"SirPatrickStewart",shape:"0 0, 60 -50, 90 0, 50 -150",color:"#9a0eea",price:10,id:8},{name:"Little L",shape:"0 0, 100 0, 100 100, 50 100, 50 50, 0 50",color:"#d1b26f",price:10,id:9},{name:"longnthicc",shape:"0 0, 250 0, 250 50, 0 50",color:"#029386",price:50,id:10},{name:"t-bone",shape:"0 0, 240 0, 240 -80, 160 -80, 160 -160, 80 -160, 80 -80, 0 -80",color:"#ffb07c",price:100,id:11},{name:"koko",shape:"0 0, 80 0, 80 -80, 240 -80, 240 0, 160 0, 160 80, 0 80",color:"#ff796c",price:100,id:12},{name:"Pig God",shape:"0 0, 240 0, 240 240, 0 240",color:"#001146",price:500,id:13}],p=[];function ne(e){const t=e.split(/[ ,]+/),o=[];for(let s=0;s<t.length;s+=2)o.push(n.exports.Vector.create(+t[s],+t[s+1]));return o}function re(e){const t=n.exports.Composite.allBodies(e.world);let o=0;const s=1e3;p.length=0;for(let r=0;r<s;r++){const i=y.height-r*100-100,a={x:0,y:i},v={x:800,y:i},E=n.exports.Query.ray(t,a,v);let R=!1;for(const f of E){const V=f.bodyA;if(V.isStatic)continue;const P=1;if(V.velocity.x<P&&V.velocity.y<P){R=!0;break}}if(R)p.push([a,v]),o+=1;else break}return o}function ie(e){const t=[],o=5;for(const[s,r]of e.entries()){const i=ne(r.shape),a=100+s%o*150,v=80+160*Math.floor(s/o),E=n.exports.Bodies.fromVertices(a,v,[i],{label:""+r.id,render:{fillStyle:r.color,lineWidth:0}},!0);t.push(E)}return t}function N(e,t){n.exports.Common.setDecomp(ee);const o=ie(t),s=[n.exports.Bodies.rectangle(0,600,2600,50,{isStatic:!0,render:{fillStyle:"#15b01a"}}),n.exports.Bodies.rectangle(800,600,50,150,{isStatic:!0}),n.exports.Bodies.rectangle(0,600,50,150,{isStatic:!0})];return n.exports.Composite.add(e.world,[...o,...s]),{toyBodies:o,walls:s}}function ae(){const e=n.exports.Engine.create();return N(e,b),n.exports.Events.on(e,"beforeUpdate",function(t){t.timestamp%5e3<50}),e}function $(){const e=window.document;return e.fullscreenElement&&e.fullscreenElement!==null||e.webkitFullscreenElement&&e.webkitFullscreenElement!==null||e.mozFullScreenElement&&e.mozFullScreenElement!==null||e.msFullscreenElement&&e.msFullscreenElement!==null}function H(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():console.warn("Did not find request full screen method",e)}function ce(){const e=window.document;e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}window.toggleFullScreen=function(e){$()?ce():H(e||document.body)};var le="./assets/birds.cd8982a8.png",ue="./assets/fario.345c16a8.png",de="./assets/god.230c655b.png",pe="./assets/piano2.2a693cb6.mp3",me="./assets/sun.ce27eed4.png";const fe=document.getElementById("app");let l,m,c,q,M;const C=[];let I={isFixed:!1,text:"$$$$",x:-1e3,y:0},T,w,S=null;const he={none:-1,left:0,middle:1,right:2};function xe(e){var t=e.bounds.max.x-e.bounds.min.x,o=e.bounds.max.y-e.bounds.min.y,s=t/e.options.width,r=o/e.options.height;e.context.setTransform(e.options.pixelRatio/s,0,0,e.options.pixelRatio/r,0,0),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)}function ge(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)}function ye(e){xe(e);const t=e.context;for(const[o,s]of p)t.beginPath(),t.moveTo(o.x,o.y),t.lineTo(s.x,s.y),t.strokeStyle="rgba(255,255,255,0.3)",t.lineWidth=3.5,t.stroke();t.fillStyle="#fff",t.font="24px sans-serif",t.textAlign="center";for(const o of C)Ee(t,o.text,o.x,o.y);w&&w.image&&t.drawImage(w.image,w.x+2*Math.cos(Date.now()/100),w.y+2*Math.sin(Date.now()/100)),ge(e)}const k={min:{x:-500,y:-600},max:{x:1200,y:700}},be={x:y.width*.5,y:y.height*.5};function W(e,t){const o=1,s=n.exports.Vector.mult(t,o);return e.bounds.min.x+s.x<k.min.x&&(s.x=k.min.x-e.bounds.min.x),e.bounds.max.x+s.x>k.max.x&&(s.x=k.max.x-e.bounds.max.x),e.bounds.min.y+s.y<k.min.y&&(s.y=k.min.y-e.bounds.min.y),e.bounds.max.y+s.y>k.max.y&&(s.y=k.max.y-e.bounds.max.y),n.exports.Bounds.translate(e.bounds,s),s}const we=.9;let h=we;async function Se(e){c=n.exports.Render.create({engine:e,element:fe,options:y}),n.exports.Render.run(c);var t=n.exports.Mouse.create(c.canvas);let o=n.exports.MouseConstraint.create(e,{mouse:t,constraint:{stiffness:.1,angularStiffness:.1,render:{}}});n.exports.Composite.add(e.world,o);const s=document.getElementById("fullscreen-container");n.exports.Events.on(o,"mousedown",()=>{a=n.exports.Vector.clone(t.position),$()||H(s)}),n.exports.Events.on(o,"mouseup",()=>{a=n.exports.Vector.clone(t.position),a=null}),n.exports.Events.on(o,"startdrag",u=>{const d=+u.body.label;S=b[d],console.log("draggedToy",S),q.startDrag(u)});let r=0,i=["a","b","c","d","e","f","g"];n.exports.Events.on(o,"enddrag",u=>{S&&(B(i[r]),r=(r+1)%i.length),S=null,q.endDrag(u)});let a=t.position,v=e.timing.timestamp;W(c,{x:-650,y:-100}),n.exports.Events.on(o,"mousemove",u=>{const d=e.timing.timestamp-v;if(t.button!=he.none){if(!u.source.body&&a&&d<100){const x=n.exports.Vector.sub(a,t.position);n.exports.Vector.magnitude(x)>60?console.log("too big panView, ignoring",x):W(c,x)}const F=n.exports.Vector.sub(t.absolute,be),z=n.exports.Vector.magnitude(F);if(u.source.body&&z>150){const x=n.exports.Vector.normalise(F),g=n.exports.Vector.mult(x,3);W(c,g)}n.exports.Mouse.setOffset(t,c.bounds.min)}a=n.exports.Vector.clone(t.position),v=e.timing.timestamp});const E=.6,R=1.4;let f={x:1,y:1};const V=document.getElementById("bank-label");n.exports.Events.on(c,"afterRender",()=>ye(c)),n.exports.Events.on(c,"beforeRender",function(){let u;var d=t.wheelDelta*-.1;h+=d,h>R&&(h=R),h<E&&(h=E),Math.abs(f.x-h)>.01&&(d=(h-f.x)*.2,f.x+=d,f.y+=d,c.bounds.max.x=c.bounds.min.x+y.width*f.x,c.bounds.max.y=c.bounds.min.y+y.height*f.y,u={x:y.width*d*-.5,y:y.height*d*-.5},n.exports.Bounds.translate(c.bounds,u),n.exports.Mouse.setScale(t,f),n.exports.Mouse.setOffset(t,c.bounds.min));const F=re(e),z=F*F*F,x=[Y,K,J];if(l.setEarn(z),p.length>0){const g=p[p.length-1];if(I.x=g[0].x-10,I.y=g[0].y,I.text="$"+z+`
cash out`,T.position,n.exports.Body.setPosition(T,{x:I.x,y:g[0].y+4}),p.length%3==0){const Q=Math.floor(p.length/3-1)%x.length;w={image:x[Q],x:g[0].x-200,y:g[0].y-64},S&&S.name==="mariobait"&&(w.image=_)}else w=void 0}V.textContent="bank: $"+l.getBank()});var P=n.exports.Runner.create({isFixed:!0});n.exports.Runner.run(P,e)}const L={bank:"bank",purchased:"purchased"},A="#666";function ke(e,t){t(e),e.parts.map(o=>{t(o)})}function O(e,t){ke(e,o=>{o.render.fillStyle=t})}class G{start(){}startDrag(t){}endDrag(t){}}function U(e){C.length=0,C.push({isFixed:!1,text:`Purchase blocks
Build a tower
Taller towers earn WAY more money
Cash out when your tower is ready
Repeat until you find god`,x:-200,y:0}),q=new e,q.start()}class ve extends G{start(){n.exports.Composite.allBodies(m.world).map(s=>{n.exports.World.remove(m.world,s)});const o=l.purchasedToys();N(m,o),I.x=-1e3,C.push(I),T=n.exports.Bodies.rectangle(-1e3,200,100,50,{isSensor:!0,isStatic:!0,render:{fillStyle:"rgba(200, 200, 0, 0.5)",strokeStyle:"dbb40c",lineWidth:3}}),n.exports.Composite.add(m.world,T)}startDrag({body:t}){t===T&&(console.log("cash out!",T.position.y),l.cashOut())}}function Be(){return m.world.bodies.filter(e=>!isNaN(+e.label))}function Ee(e,t,o,s){for(var r=e.measureText("M").width*1.2,i=t.split(`
`),a=0;a<i.length;++a)e.fillText(i[a],o,s),s+=r}class j extends G{start(){n.exports.Composite.allBodies(m.world).map(s=>{n.exports.World.remove(m.world,s)}),N(m,b).toyBodies.map(s=>{s.isStatic=!0;const r=+s.label;if(l.isPurchased(r))return;const i=b[r];l.getBank()<i.price&&n.exports.World.remove(m.world,s),O(s,A)}),Be().map(s=>{const r=b[+s.label],i={text:r.name+`
$`+r.price,x:s.position.x,y:s.position.y+40,isFixed:!1};C.push(i)})}startDrag({body:t}){!S||O(t,S.color)}endDrag({body:t}){const o=+t.label,s=b[o];!s||(O(t,s.color),l.isPurchased(o)?U(ve):l.getBank()>=s.price?(l.buyToy(o),O(t,s.color)):O(t,A))}}const Fe=3;class Me{constructor(){D(this,"bankMoney",Fe);D(this,"earn",0);D(this,"purchased",[]);const t=localStorage.getItem(L.bank);t&&(this.bankMoney=+t);const o=localStorage.getItem(L.purchased);o&&(this.purchased=JSON.parse(o))}setEarn(t){this.earn=t}cashOut(){switch(console.log("cashout",p.length,this.earn),p.length){case 0:case 1:B("cash0");break;case 2:B("cash1");break;case 3:case 4:B("cash2");break;case 5:case 6:B("cash3");break;case 7:case 8:B("cash4");break;case 9:case 10:case 11:case 12:B("cash5");break}this.setBankMoney(this.bankMoney+this.earn),U(j)}setBankMoney(t){this.bankMoney=t;const o=this.bankMoney.toString();localStorage.setItem(L.bank,o)}buyToy(t){const o=b[t];this.setBankMoney(this.bankMoney-o.price),this.purchased.push(t),this.purchased=[...new Set(this.purchased)];const s=JSON.stringify(this.purchased);localStorage.setItem(L.purchased,s)}getBank(){return this.bankMoney}isPurchased(t){return this.purchased.indexOf(t)>=0}purchasedToys(){return this.purchased.map(t=>b[t])}zoomIn(){h+=.1}zoomOut(){h-=.1}toggleMute(){const t=document.getElementById("mute-button"),o=!M.mute();M.mute(o),o?t.innerText="unmute":t.innerText="mute"}}const Ie={music:[0,(1*60+27)*1e3],a:[(0*60+1.197)*1e3,1e3],b:[(0*60+3.598)*1e3,1e3],c:[(0*60+5.604)*1e3,1e3],d:[(0*60+7.164)*1e3,1e3],e:[(0*60+8.559)*1e3,1e3],f:[(0*60+9.904)*1e3,1e3],g:[(0*60+11.172)*1e3,1e3],cash0:[(0*60+29.721)*1e3,3e3],cash1:[(0*60+35.041)*1e3,3400],cash2:[(0*60+39.216)*1e3,4e3],cash3:[(0*60+43.939)*1e3,4e3],cash4:[(0*60+48.336)*1e3,4e3],cash5:[(0*60+54.112)*1e3,8e3]};function B(e){M.play(e)}function Te(){console.log("soundsSetup"),M=new te.Howl({src:[pe],sprite:Ie});let e=!1;setInterval(()=>{document.hidden?(e=!0,M.pause()):(e=!1,e&&M.play())},100)}const J=new Image;J.src=de;const K=new Image;K.src=me;const Y=new Image;Y.src=le;const _=new Image;_.src=ue;function Re(e){Te(),m=e,l=new Me,U(j),window._game=l,Se(e)}window.addEventListener("load",()=>{const e=ae();Re(e)});
