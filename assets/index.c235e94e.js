var W=Object.defineProperty;var $=(e,t,o)=>t in e?W(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var R=(e,t,o)=>($(e,typeof t!="symbol"?t+"":t,o),o);import{M as s,s as H}from"./vendor.985111c7.js";const j=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const c of r.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(i){if(i.ep)return;i.ep=!0;const r=o(i);fetch(i.href,r)}};j();function A(){return e=>e}const m=A()({width:1200,height:600,hasBounds:!0,wireframes:!1,background:"#75bbfd"}),h=[{name:"skuer",shape:"0 0, 50 0, 50 50, 0 50",color:"#e50000",price:1},{name:"pointer",shape:"40 0, 40 30, 100 30, 100 70, 40 70, 40 100, 0 50",color:"#89fe05",price:1},{name:"chuvvy",shape:"120 0, 75 50, 120 100, 25 100, -20 50, 25 0",color:"#96f97b",price:1},{name:"mariobait",shape:"50 0, 63 38, 100 38, 69 59, 82 100, 50 75, 18 100, 31 59, 0 38, 37 38",color:"#0343df",price:1},{name:"horse-shoe",shape:"35 7, 19 17, 14 38, 14 58, 25 79, 45 85, 95 84, 95 66, 46 67, 34 59, 30 44, 33 29, 45 23, 95 23, 95 7, 53 7",color:"#ff81c0",price:1},{name:"tri-tip",shape:"0 0, -50 -86.6, -100 0",color:"#c20078",price:3},{name:"1x1",shape:"0 0, 100 0, 100 100, 0 100",color:"#653700",price:5},{name:"noodle",shape:"0 0, 150 0, 150 25, 0 25",color:"#ffff14",price:10},{name:"SirPatrickStewart",shape:"0 0, 60 -50, 90 0, 50 -150",color:"#9a0eea",price:10},{name:"Little L",shape:"0 0, 100 0, 100 100, 50 100, 50 50, 0 50",color:"#d1b26f",price:10},{name:"longnthicc",shape:"0 0, 250 0, 250 50, 0 50",color:"#029386",price:50},{name:"t-bone",shape:"0 0, 240 0, 240 -80, 160 -80, 160 -160, 80 -160, 80 -80, 0 -80",color:"#ffb07c",price:100},{name:"koko",shape:"0 0, 80 0, 80 -80, 240 -80, 240 0, 160 0, 160 80, 0 80",color:"#ff796c",price:100},{name:"Pig God",shape:"0 0, 240 0, 240 240, 0 240",color:"#001146",price:500}],b=[];function G(e){const t=e.split(/[ ,]+/),o=[];for(let n=0;n<t.length;n+=2)o.push(s.Vector.create(+t[n],+t[n+1]));return o}function J(e){const t=s.Composite.allBodies(e.world);let o=0;const n=1e3;b.length=0;for(let i=0;i<n;i++){const r=m.height-i*100-100,c={x:0,y:r},y={x:800,y:r},E=s.Query.ray(t,c,y);let x=!1;for(const l of E){const k=l.bodyA;if(k.isStatic)continue;const F=1;if(k.velocity.x<F&&k.velocity.y<F){x=!0;break}}if(x)b.push([c,y]),o+=1;else break}return o}function K(e){const t=[],o=5;for(const[n,i]of e.entries()){const r=G(i.shape),c=100+n%o*150,y=80+160*Math.floor(n/o),E=s.Bodies.fromVertices(c,y,[r],{label:""+n,render:{fillStyle:i.color,lineWidth:0}},!0);t.push(E)}return t}function V(e,t){s.Common.setDecomp(H);const o=K(t),n=[s.Bodies.rectangle(0,600,2600,50,{isStatic:!0,render:{fillStyle:"#15b01a"}}),s.Bodies.rectangle(800,600,50,150,{isStatic:!0}),s.Bodies.rectangle(0,600,50,150,{isStatic:!0})];return s.Composite.add(e.world,[...o,...n]),{toyBodies:o,walls:n}}function U(){const e=s.Engine.create();return V(e,h),s.Events.on(e,"beforeUpdate",function(t){t.timestamp%5e3<50}),e}function q(){const e=window.document;return e.fullscreenElement&&e.fullscreenElement!==null||e.webkitFullscreenElement&&e.webkitFullscreenElement!==null||e.mozFullScreenElement&&e.mozFullScreenElement!==null||e.msFullscreenElement&&e.msFullscreenElement!==null}function L(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():console.warn("Did not find request full screen method",e)}function Z(){const e=window.document;e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}window.toggleFullScreen=function(e){q()?Z():L(e||document.body)};const _=document.getElementById("app");let u,d,T;const I=[];let S={isFixed:!1,text:"$$$$",x:-1e3,y:0},w;const Q={none:-1,left:0,middle:1,right:2};function X(e){var t=e.bounds.max.x-e.bounds.min.x,o=e.bounds.max.y-e.bounds.min.y,n=t/e.options.width,i=o/e.options.height;e.context.setTransform(e.options.pixelRatio/n,0,0,e.options.pixelRatio/i,0,0),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)}function Y(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)}function ee(e){X(e);const t=e.context;for(const[o,n]of b)t.beginPath(),t.moveTo(o.x,o.y),t.lineTo(n.x,n.y),t.strokeStyle="rgba(255,255,255,0.3)",t.lineWidth=3.5,t.stroke();t.fillStyle="#fff",t.font="24px sans-serif",t.textAlign="center";for(const o of I)ie(t,o.text,o.x,o.y);Y(e)}const p={min:{x:-200,y:-600},max:{x:1100,y:700}},te={x:m.width*.5,y:m.height*.5};function O(e,t){const o=1,n=s.Vector.mult(t,o);return e.bounds.min.x+n.x<p.min.x&&(n.x=p.min.x-e.bounds.min.x),e.bounds.max.x+n.x>p.max.x&&(n.x=p.max.x-e.bounds.max.x),e.bounds.min.y+n.y<p.min.y&&(n.y=p.min.y-e.bounds.min.y),e.bounds.max.y+n.y>p.max.y&&(n.y=p.max.y-e.bounds.max.y),s.Bounds.translate(e.bounds,n),n}async function ne(e){const t=s.Render.create({engine:e,element:_,options:m});s.Render.run(t);var o=s.Mouse.create(t.canvas);let n=s.MouseConstraint.create(e,{mouse:o,constraint:{stiffness:.1,angularStiffness:.1,render:{}}});s.Composite.add(e.world,n);const i=document.getElementById("fullscreen-container");s.Events.on(n,"mousedown",()=>{console.log("touch"),r=s.Vector.clone(o.position),q()||L(i)}),s.Events.on(n,"startdrag",f=>{T.startDrag(f)}),s.Events.on(n,"enddrag",f=>{T.endDrag(f)});let r=o.position;O(t,{x:50,y:50}),s.Events.on(n,"mousemove",f=>{if(o.button!=Q.none){if(!f.source.body){const g=s.Vector.sub(r,o.position);O(t,g)}const a=s.Vector.sub(o.absolute,te);if(s.Vector.magnitude(a)>150){const g=s.Vector.normalise(a),v=s.Vector.mult(g,2);O(t,v)}s.Mouse.setOffset(o,t.bounds.min)}r=s.Vector.clone(o.position)});const c=.6,y=1.4;let x=.9,l={x:1,y:1};const k=document.getElementById("bank-label");s.Events.on(t,"afterRender",()=>ee(t)),s.Events.on(t,"beforeRender",function(){let f;var a=o.wheelDelta*-.1;a!==0&&(a<0&&l.x>=c||a>0&&l.x<=y)&&(x+=a),Math.abs(l.x-x)>.01&&(a=(x-l.x)*.2,l.x+=a,l.y+=a,t.bounds.max.x=t.bounds.min.x+m.width*l.x,t.bounds.max.y=t.bounds.min.y+m.height*l.y,f={x:m.width*a*-.5,y:m.height*a*-.5},s.Bounds.translate(t.bounds,f),s.Mouse.setScale(o,l),s.Mouse.setOffset(o,t.bounds.min));const M=J(e),g=M*M*M;if(u.setEarn(g),b.length>0){const v=b[b.length-1];S.x=v[0].x-10,S.y=v[0].y,S.text="$"+g+`
cash out`,w.position,s.Body.setPosition(w,{x:S.x,y:v[0].y+4})}k.textContent="bank: $"+u.getBank()});var F=s.Runner.create({isFixed:!0});s.Runner.run(F,e)}const C={bank:"bank",purchased:"purchased"},D="#666";function B(e,t){e.render.fillStyle=t,e.parts.map(o=>{o.render.fillStyle=t})}class z{start(){}startDrag(t){}endDrag(t){}}function P(e){I.length=0,T=new e,T.start()}class oe extends z{start(){s.Composite.allBodies(d.world).map(n=>{s.World.remove(d.world,n)});const o=u.purchasedToys();V(d,o),S.x=-1e3,I.push(S),w=s.Bodies.rectangle(-1e3,200,100,50,{isSensor:!0,isStatic:!0,render:{fillStyle:"rgba(200, 200, 0, 0.5)",strokeStyle:"dbb40c",lineWidth:3}}),s.Composite.add(d.world,w)}startDrag({body:t}){t===w&&(console.log("cash out!",w.position.y),u.cashOut())}}function se(){return d.world.bodies.filter(e=>!isNaN(+e.label))}function ie(e,t,o,n){for(var i=e.measureText("M").width*1.2,r=t.split(`
`),c=0;c<r.length;++c)e.fillText(r[c],o,n),n+=i}class N extends z{start(){s.Composite.allBodies(d.world).map(n=>{s.World.remove(d.world,n)}),V(d,h).toyBodies.map(n=>{n.isStatic=!0;const i=+n.label,r=h[i];u.isPurchased(i)||(u.getBank()<r.price&&s.World.remove(d.world,n),B(n,D))}),se().map(n=>{const i=h[+n.label],r={text:i.name+`
$`+i.price,x:n.position.x,y:n.position.y+40,isFixed:!1};I.push(r)})}startDrag({body:t}){const o=+t.label,n=h[o];!n||B(t,n.color)}endDrag({body:t}){const o=+t.label,n=h[o];!n||(B(t,n.color),u.isPurchased(o)?P(oe):u.getBank()>=n.price?(u.buyToy(o),B(t,n.color)):B(t,D))}}const re=3;class ce{constructor(){R(this,"bankMoney",re);R(this,"earn",0);R(this,"purchased",[]);const t=localStorage.getItem(C.bank);t&&(this.bankMoney=+t);const o=localStorage.getItem(C.purchased);o&&(this.purchased=JSON.parse(o))}setEarn(t){this.earn=t}cashOut(){this.setBankMoney(this.bankMoney+this.earn),P(N)}setBankMoney(t){this.bankMoney=t;const o=this.bankMoney.toString();localStorage.setItem(C.bank,o)}buyToy(t){const o=h[t];this.setBankMoney(this.bankMoney-o.price),this.purchased.push(t),this.purchased=[...new Set(this.purchased)];const n=JSON.stringify(this.purchased);localStorage.setItem(C.purchased,n)}getBank(){return this.bankMoney}isPurchased(t){return this.purchased.indexOf(t)>=0}purchasedToys(){return this.purchased.map(t=>h[t])}}function ae(e){d=e,u=new ce,P(N),window._game=u,ne(e)}window.addEventListener("load",()=>{const e=U();ae(e)});
