var te=Object.defineProperty;var oe=(e,t,o)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var D=(e,t,o)=>(oe(e,typeof t!="symbol"?t+"":t,o),o);import{m as r,d as se,h as ne}from"./vendor.b9efbc4b.js";const re=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function o(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerpolicy&&(i.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?i.credentials="include":n.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(n){if(n.ep)return;n.ep=!0;const i=o(n);fetch(n.href,i)}};re();function ie(){return e=>e}const y=ie()({width:1200,height:600,hasBounds:!0,wireframes:!1,background:"#75bbfd"}),b=[{name:"skuer",shape:"0 0, 50 0, 50 50, 0 50",color:"#e50000",price:1,id:0},{name:"pointer",shape:"40 0, 40 30, 100 30, 100 70, 40 70, 40 100, 0 50",color:"#89fe05",price:1,id:1},{name:"chuvvy",shape:"120 0, 75 50, 120 100, 25 100, -20 50, 25 0",color:"#96f97b",price:1,id:2},{name:"mariobait",shape:"50 0, 63 38, 100 38, 69 59, 82 100, 50 75, 18 100, 31 59, 0 38, 37 38",color:"#0343df",price:1,id:3},{name:"horse-shoe",shape:"35 7, 19 17, 14 38, 14 58, 25 79, 45 85, 95 84, 95 66, 46 67, 34 59, 30 44, 33 29, 45 23, 95 23, 95 7, 53 7",color:"#ff81c0",price:1,id:4},{name:"tri-tip",shape:"0 0, -50 -86.6, -100 0",color:"#c20078",price:5,id:5},{name:"1x1",shape:"0 0, 100 0, 100 100, 0 100",color:"#653700",price:5,id:6},{name:"noodle",shape:"0 0, 150 0, 150 25, 0 25",color:"#ffff14",price:10,id:7},{name:"SirPatrickStewart",shape:"0 0, 60 -50, 90 0, 50 -150",color:"#9a0eea",price:10,id:8},{name:"Little L",shape:"0 0, 100 0, 100 100, 50 100, 50 50, 0 50",color:"#d1b26f",price:10,id:9},{name:"longnthicc",shape:"0 0, 250 0, 250 50, 0 50",color:"#029386",price:50,id:10},{name:"t-bone",shape:"0 0, 240 0, 240 -80, 160 -80, 160 -160, 80 -160, 80 -80, 0 -80",color:"#ffb07c",price:100,id:11},{name:"koko",shape:"0 0, 80 0, 80 -80, 240 -80, 240 0, 160 0, 160 80, 0 80",color:"#ff796c",price:100,id:12},{name:"Pig God",shape:"0 0, 240 0, 240 240, 0 240",color:"#001146",price:500,id:13}],u=[];function ae(e){const t=e.split(/[ ,]+/),o=[];for(let s=0;s<t.length;s+=2)o.push(r.exports.Vector.create(+t[s],+t[s+1]));return o}function ce(e){const t=r.exports.Composite.allBodies(e.world);let o=0;const s=1e3;u.length=0;for(let n=0;n<s;n++){const i=y.height-n*100-100,a={x:0,y:i},k={x:800,y:i},M=r.exports.Query.ray(t,a,k);let R=!1;for(const f of M){const C=f.bodyA;if(C.isStatic)continue;const z=1;if(C.velocity.x<z&&C.velocity.y<z){R=!0;break}}if(R)u.push([a,k]),o+=1;else break}return o}function le(e){const t=[],o=5;for(const[s,n]of e.entries()){const i=ae(n.shape),a=100+s%o*150,k=80+160*Math.floor(s/o),M=r.exports.Bodies.fromVertices(a,k,[i],{label:""+n.id,render:{fillStyle:n.color,lineWidth:0}},!0);t.push(M)}return t}function U(e,t){r.exports.Common.setDecomp(se);const o=le(t),s=[r.exports.Bodies.rectangle(0,600,2600,50,{isStatic:!0,render:{fillStyle:"#15b01a"}}),r.exports.Bodies.rectangle(800,600,50,150,{isStatic:!0}),r.exports.Bodies.rectangle(0,600,50,150,{isStatic:!0})];return r.exports.Composite.add(e.world,[...o,...s]),{toyBodies:o,walls:s}}function ue(){const e=r.exports.Engine.create();return U(e,b),r.exports.Events.on(e,"beforeUpdate",function(t){t.timestamp%5e3<50}),e}function A(){const e=window.document;return e.fullscreenElement&&e.fullscreenElement!==null||e.webkitFullscreenElement&&e.webkitFullscreenElement!==null||e.mozFullScreenElement&&e.mozFullScreenElement!==null||e.msFullscreenElement&&e.msFullscreenElement!==null}function G(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():console.warn("Did not find request full screen method",e)}function de(){const e=window.document;e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}window.toggleFullScreen=function(e){A()?de():G(e||document.body)};var me="./assets/birds.cd8982a8.png",pe="./assets/fario.345c16a8.png",fe="./assets/god.230c655b.png",he="./assets/money.c3b7f8bb.png",xe="./assets/piano2.2a693cb6.mp3",ge="./assets/sun.ce27eed4.png";const ye=document.getElementById("app");let d,l,c,L,F;const V=[];let I={isFixed:!1,text:"$$$$",x:-1e3,y:0},T,w,O,S=null;const be={none:-1,left:0,middle:1,right:2};function we(e){var t=e.bounds.max.x-e.bounds.min.x,o=e.bounds.max.y-e.bounds.min.y,s=t/e.options.width,n=o/e.options.height;e.context.setTransform(e.options.pixelRatio/s,0,0,e.options.pixelRatio/n,0,0),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)}function Se(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)}function ve(e,t,o,s,n,i,a){e.save(),e.translate(o+n/2,s+i/2),e.rotate(a*Math.PI/180),e.translate(-o-n/2,-s-i/2),e.drawImage(t,o,s,n,i),e.restore()}const W=[];function ke(e){we(e);const t=e.context;for(const[n,i]of u)t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(i.x,i.y),t.strokeStyle="rgba(255,255,255,0.3)",t.lineWidth=3.5,t.stroke();t.fillStyle="#fff",t.font="24px sans-serif",t.textAlign="center";for(const n of V)Re(t,n.text,n.x,n.y);const o=l.timing.timestamp,s=l.timing.lastDelta;if(w&&w.image&&t.drawImage(w.image,w.x+2*Math.cos(o/100),w.y+2*Math.sin(o/100)),Se(e),O&&O.image){const n=64;for(const i of W)i.x+=s*i.vx,i.y+=s*i.vy,i.angle+=s*i.vangle,i.vy+=s*.001,ve(t,O.image,i.x,i.y,n,n,i.angle)}}const v={min:{x:-500,y:-600},max:{x:1200,y:700}},Be={x:y.width*.5,y:y.height*.5};function $(e,t){const o=1,s=r.exports.Vector.mult(t,o);return e.bounds.min.x+s.x<v.min.x&&(s.x=v.min.x-e.bounds.min.x),e.bounds.max.x+s.x>v.max.x&&(s.x=v.max.x-e.bounds.max.x),e.bounds.min.y+s.y<v.min.y&&(s.y=v.min.y-e.bounds.min.y),e.bounds.max.y+s.y>v.max.y&&(s.y=v.max.y-e.bounds.max.y),r.exports.Bounds.translate(e.bounds,s),s}const Me=.9;let h=Me;async function Ee(e){c=r.exports.Render.create({engine:e,element:ye,options:y}),r.exports.Render.run(c);var t=r.exports.Mouse.create(c.canvas);let o=r.exports.MouseConstraint.create(e,{mouse:t,constraint:{stiffness:.1,angularStiffness:.1,render:{}}});r.exports.Composite.add(e.world,o);const s=document.getElementById("fullscreen-container");r.exports.Events.on(o,"mousedown",()=>{a=r.exports.Vector.clone(t.position),A()||G(s)}),r.exports.Events.on(o,"mouseup",()=>{a=r.exports.Vector.clone(t.position),a=null}),r.exports.Events.on(o,"startdrag",m=>{const p=+m.body.label;S=b[p],console.log("draggedToy",S),L.startDrag(m)});let n=0,i=["a","b","c","d","e","f","g"];r.exports.Events.on(o,"enddrag",m=>{S&&(B(i[n]),n=(n+1)%i.length),S=null,L.endDrag(m)});let a=t.position,k=e.timing.timestamp;$(c,{x:-650,y:-100}),r.exports.Events.on(o,"mousemove",m=>{const p=e.timing.timestamp-k;if(t.button!=be.none){if(!m.source.body&&a&&p<100){const x=r.exports.Vector.sub(a,t.position);r.exports.Vector.magnitude(x)>60?console.log("too big panView, ignoring",x):$(c,x)}const E=r.exports.Vector.sub(t.absolute,Be),q=r.exports.Vector.magnitude(E);if(m.source.body&&q>150){const x=r.exports.Vector.normalise(E),g=r.exports.Vector.mult(x,3);$(c,g)}r.exports.Mouse.setOffset(t,c.bounds.min)}a=r.exports.Vector.clone(t.position),k=e.timing.timestamp});const M=.6,R=1.4;let f={x:1,y:1};const C=document.getElementById("bank-label");r.exports.Events.on(c,"afterRender",()=>ke(c)),r.exports.Events.on(c,"beforeRender",function(){let m;var p=t.wheelDelta*-.1;h+=p,h>R&&(h=R),h<M&&(h=M),Math.abs(f.x-h)>.01&&(p=(h-f.x)*.2,f.x+=p,f.y+=p,c.bounds.max.x=c.bounds.min.x+y.width*f.x,c.bounds.max.y=c.bounds.min.y+y.height*f.y,m={x:y.width*p*-.5,y:y.height*p*-.5},r.exports.Bounds.translate(c.bounds,m),r.exports.Mouse.setScale(t,f),r.exports.Mouse.setOffset(t,c.bounds.min));const E=ce(e),q=E*E*E,x=[Q,_,Y];if(d.setEarn(q),u.length>0){const g=u[u.length-1];if(I.x=g[0].x-10,I.y=g[0].y,I.text="$"+q+`
cash out`,T.position,r.exports.Body.setPosition(T,{x:I.x,y:g[0].y+4}),u.length%3==0){const ee=Math.floor(u.length/3-1)%x.length;w={image:x[ee],x:g[0].x-200,y:g[0].y-64},S&&S.name==="mariobait"&&(w.image=X)}else w=void 0}C.textContent="bank: $"+d.getBank()});var z=r.exports.Runner.create({isFixed:!0});r.exports.Runner.run(z,e)}const N={bank:"bank",purchased:"purchased"},j="#666";function Fe(e,t){t(e),e.parts.map(o=>{t(o)})}function P(e,t){Fe(e,o=>{o.render.fillStyle=t})}class J{start(){}startDrag(t){}endDrag(t){}}function H(e){V.length=0,V.push({isFixed:!1,text:`Purchase blocks
Build a tower
Taller towers earn WAY more money
Cash out when your tower is ready
Repeat until you find god`,x:-200,y:0}),L=new e,L.start()}class Ie extends J{start(){r.exports.Composite.allBodies(l.world).map(s=>{r.exports.World.remove(l.world,s)});const o=d.purchasedToys();U(l,o),I.x=-1e3,V.push(I),T=r.exports.Bodies.rectangle(-1e3,200,100,50,{isSensor:!0,isStatic:!0,render:{fillStyle:"rgba(200, 200, 0, 0.5)",strokeStyle:"dbb40c",lineWidth:3}}),r.exports.Composite.add(l.world,T)}startDrag({body:t}){t===T&&(console.log("cash out!",T.position.y),d.cashOut())}}function Te(){return l.world.bodies.filter(e=>!isNaN(+e.label))}function Re(e,t,o,s){for(var n=e.measureText("M").width*1.2,i=t.split(`
`),a=0;a<i.length;++a)e.fillText(i[a],o,s),s+=n}class K extends J{start(){r.exports.Composite.allBodies(l.world).map(s=>{r.exports.World.remove(l.world,s)}),U(l,b).toyBodies.map(s=>{s.isStatic=!0;const n=+s.label;if(d.isPurchased(n))return;const i=b[n];d.getBank()<i.price&&r.exports.World.remove(l.world,s),P(s,j)}),Te().map(s=>{const n=b[+s.label],i={text:n.name+`
$`+n.price,x:s.position.x,y:s.position.y+40,isFixed:!1};V.push(i)})}startDrag({body:t}){!S||P(t,S.color)}endDrag({body:t}){const o=+t.label,s=b[o];!s||(P(t,s.color),d.isPurchased(o)?H(Ie):d.getBank()>=s.price?(d.buyToy(o),P(t,s.color)):P(t,j))}}const Ce=3;class Ve{constructor(){D(this,"bankMoney",Ce);D(this,"earn",0);D(this,"purchased",[]);const t=localStorage.getItem(N.bank);t&&(this.bankMoney=+t);const o=localStorage.getItem(N.purchased);o&&(this.purchased=JSON.parse(o))}setEarn(t){this.earn=t}cashOut(){switch(console.log("cashout",u.length,this.earn),u.length){case 0:case 1:B("cash0");break;case 2:B("cash1");break;case 3:case 4:B("cash2");break;case 5:case 6:B("cash3");break;case 7:case 8:B("cash4");break;case 9:case 10:case 11:case 12:B("cash5");break}this.setBankMoney(this.bankMoney+this.earn),O={image:Z,x:400,y:400};const t=u.length*2;for(let o=0;o<t;o++)W.push({angle:Math.random(),vangle:1*Math.random(),vx:.5-1*Math.random(),vy:-1+1*Math.random(),x:600,y:400});setTimeout(()=>{O=void 0,W.length=0},3500),H(K)}setBankMoney(t){this.bankMoney=t;const o=this.bankMoney.toString();localStorage.setItem(N.bank,o)}buyToy(t){const o=b[t];this.setBankMoney(this.bankMoney-o.price),this.purchased.push(t),this.purchased=[...new Set(this.purchased)];const s=JSON.stringify(this.purchased);localStorage.setItem(N.purchased,s)}getBank(){return this.bankMoney}isPurchased(t){return this.purchased.indexOf(t)>=0}purchasedToys(){return this.purchased.map(t=>b[t])}zoomIn(){h+=.1}zoomOut(){h-=.1}toggleMute(){const t=document.getElementById("mute-button"),o=!F.mute();F.mute(o),o?t.innerText="unmute":t.innerText="mute"}}const Oe={music:[0,(1*60+27)*1e3],a:[(0*60+1.197)*1e3,1e3],b:[(0*60+3.598)*1e3,1e3],c:[(0*60+5.604)*1e3,1e3],d:[(0*60+7.164)*1e3,1e3],e:[(0*60+8.559)*1e3,1e3],f:[(0*60+9.904)*1e3,1e3],g:[(0*60+11.172)*1e3,1e3],cash0:[(0*60+29.721)*1e3,3e3],cash1:[(0*60+35.041)*1e3,3400],cash2:[(0*60+39.216)*1e3,4e3],cash3:[(0*60+43.939)*1e3,4e3],cash4:[(0*60+48.336)*1e3,4e3],cash5:[(0*60+54.112)*1e3,8e3]};function B(e){F.play(e)}function Pe(){console.log("soundsSetup"),F=new ne.Howl({src:[xe],sprite:Oe});let e=!1;setInterval(()=>{document.hidden?(e=!0,F.pause()):(e=!1,e&&F.play())},100)}const Y=new Image;Y.src=fe;const _=new Image;_.src=ge;const Q=new Image;Q.src=me;const X=new Image;X.src=pe;const Z=new Image;Z.src=he;function ze(e){Pe(),l=e,d=new Ve,H(K),window._game=d,Ee(e)}window.addEventListener("load",()=>{const e=ue();ze(e)});
