var z=Object.defineProperty;var N=(e,t,n)=>t in e?z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var v=(e,t,n)=>(N(e,typeof t!="symbol"?t+"":t,n),n);import{M as s,s as H}from"./vendor.985111c7.js";const W=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}};W();function j(){return e=>e}const u=j()({width:1200,height:600,hasBounds:!0,wireframes:!1,background:"#75bbfd"}),p=[{name:"quarter",shape:"0 0, 50 0, 50 50, 0 50",color:"#e50000",price:1},{name:"pointer",shape:"40 0, 40 30, 100 30, 100 70, 40 70, 40 100, 0 50",color:"#89fe05",price:1},{name:"chuvvy",shape:"120 0, 75 50, 120 100, 25 100, -20 50, 25 0",color:"#96f97b",price:1},{name:"star",shape:"50 0, 63 38, 100 38, 69 59, 82 100, 50 75, 18 100, 31 59, 0 38, 37 38",color:"#0343df",price:1},{name:"horseShoe",shape:"35 7, 19 17, 14 38, 14 58, 25 79, 45 85, 95 84, 95 66, 46 67, 34 59, 30 44, 33 29, 45 23, 95 23, 95 7, 53 7",color:"#ff81c0",price:1},{name:"tri-tip",shape:"0 0, -50 -86.6, -100 0",color:"#c20078",price:3},{name:"1x1",shape:"0 0, 100 0, 100 100, 0 100",color:"#653700",price:5},{name:"noodle",shape:"0 0, 150 0, 150 25, 0 25",color:"#ffff14",price:10},{name:"SirPatrickStewart",shape:"0 0, 60 -50, 90 0, 50 -150",color:"#9a0eea",price:10},{name:"Little L",shape:"0 0, 100 0, 100 100, 50 100, 50 50, 0 50",color:"#d1b26f",price:10},{name:"longnthicc",shape:"0 0, 250 0, 250 50, 0 50",color:"#029386",price:50}],F=[];function A(e){const t=e.split(/[ ,]+/),n=[];for(let o=0;o<t.length;o+=2)n.push(s.Vector.create(+t[o],+t[o+1]));return n}function $(e){const t=s.Composite.allBodies(e.world);let n=0;const o=1e3;F.length=0;for(let i=0;i<o;i++){const r=u.height-i*100-100,a={x:0,y:r},y={x:800,y:r},S=s.Query.ray(t,a,y);let x=!1;for(const c of S){const g=c.bodyA;if(g.isStatic)continue;const w=1;if(g.velocity.x<w&&g.velocity.y<w){x=!0;break}}if(x)F.push([a,y]),n+=1;else break}return n}function G(e){const t=[],n=5;for(const[o,i]of e.entries()){const r=A(i.shape),a=100+o%n*150,y=80+140*Math.floor(o/n),S=s.Bodies.fromVertices(a,y,[r],{label:""+o,render:{fillStyle:i.color,lineWidth:0}},!0);t.push(S)}return t}function M(e,t){s.Common.setDecomp(H);const n=G(t),o=[s.Bodies.rectangle(0,600,2600,50,{isStatic:!0,render:{fillStyle:"#15b01a"}}),s.Bodies.rectangle(800,600,50,150,{isStatic:!0}),s.Bodies.rectangle(0,600,50,150,{isStatic:!0})];return s.Composite.add(e.world,[...n,...o]),{toyBodies:n,walls:o}}function J(){const e=s.Engine.create();return M(e,p),s.Events.on(e,"beforeUpdate",function(t){t.timestamp%5e3<50}),e}function C(){const e=window.document;return e.fullscreenElement&&e.fullscreenElement!==null||e.webkitFullscreenElement&&e.webkitFullscreenElement!==null||e.mozFullScreenElement&&e.mozFullScreenElement!==null||e.msFullscreenElement&&e.msFullscreenElement!==null}function q(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen?e.webkitRequestFullScreen():e.msRequestFullscreen?e.msRequestFullscreen():console.warn("Did not find request full screen method",e)}function K(){const e=window.document;e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()}window.toggleFullScreen=function(e){C()?K():q(e||document.body)};const U=document.getElementById("app");let d,f,E;const I=[];function Z(e){var t=e.bounds.max.x-e.bounds.min.x,n=e.bounds.max.y-e.bounds.min.y,o=t/e.options.width,i=n/e.options.height;e.context.setTransform(e.options.pixelRatio/o,0,0,e.options.pixelRatio/i,0,0),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)}function _(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)}function Q(e){Z(e);const t=e.context;for(const[n,o]of F)t.beginPath(),t.moveTo(n.x,n.y),t.lineTo(o.x,o.y),t.strokeStyle="rgba(255,255,255,0.3)",t.lineWidth=3.5,t.stroke();t.fillStyle="#fff",t.font="24px sans-serif",t.textAlign="center";for(const n of I)oe(t,n.text,n.x,n.y);_(e)}const m={min:{x:-100,y:-300},max:{x:1100,y:700}},X={x:u.width*.5,y:u.height*.5};function Y(e,t,n){const o=s.Vector.magnitude(n);if(o<50)return;var i=s.Vector.normalise(n);const r=Math.min(10,Math.pow(o-50,2)*2e-4),a=s.Vector.mult(i,r);return e.bounds.min.x+a.x<m.min.x&&(a.x=m.min.x-e.bounds.min.x),e.bounds.max.x+a.x>m.max.x&&(a.x=m.max.x-e.bounds.max.x),e.bounds.min.y+a.y<m.min.y&&(a.y=m.min.y-e.bounds.min.y),e.bounds.max.y+a.y>m.max.y&&(a.y=m.max.y-e.bounds.max.y),s.Bounds.translate(e.bounds,a),s.Mouse.setOffset(t,e.bounds.min),a}async function ee(e){const t=s.Render.create({engine:e,element:U,options:u});s.Render.run(t);var n=s.Mouse.create(t.canvas);let o=s.MouseConstraint.create(e,{mouse:n,constraint:{stiffness:.1,angularStiffness:.1,render:{}}});s.Composite.add(e.world,o);const i=document.getElementById("fullscreen-container");s.Events.on(o,"mousedown",()=>{console.log("touch"),C()||q(i)}),s.Events.on(o,"startdrag",h=>{E.startDrag(h)}),s.Events.on(o,"enddrag",h=>{E.endDrag(h)});let r={x:0,y:u.height};s.Events.on(o,"mousemove",()=>{r=s.Vector.sub(n.absolute,X),n.position});const a=.6,y=1.4;let x=.9,c={x:1,y:1};const g=document.getElementById("bank-label"),w=document.getElementById("height-label"),V=document.getElementById("earn-label");s.Events.on(t,"afterRender",()=>Q(t)),s.Events.on(t,"beforeRender",function(){let h;var l=n.wheelDelta*-.1;l!==0&&(l<0&&c.x>=a||l>0&&c.x<=y)&&(x+=l),Math.abs(c.x-x)>.01&&(l=(x-c.x)*.2,c.x+=l,c.y+=l,t.bounds.max.x=t.bounds.min.x+u.width*c.x,t.bounds.max.y=t.bounds.min.y+u.height*c.y,h={x:u.width*l*-.5,y:u.height*l*-.5},s.Bounds.translate(t.bounds,h),s.Mouse.setScale(n,c),s.Mouse.setOffset(n,t.bounds.min)),h=Y(t,n,r);const B=$(e),T=B*B;d.setEarn(T),g.textContent="bank: $"+d.getBank(),w.textContent="height: "+B,V.textContent="earn: $"+T});var P=s.Runner.create({isFixed:!0});s.Runner.run(P,e)}const k={bank:"bank",purchased:"purchased"},O="#666";function b(e,t){e.render.fillStyle=t,e.parts.map(n=>{n.render.fillStyle=t})}class D{start(){}startDrag(t){}endDrag(t){}}function R(e){I.length=0,E=new e,E.start()}class te extends D{start(){s.Composite.allBodies(f.world).map(o=>{s.World.remove(f.world,o)});const n=d.purchasedToys();M(f,n)}}function ne(){return f.world.bodies.filter(e=>!isNaN(+e.label))}function oe(e,t,n,o){for(var i=e.measureText("M").width*1.2,r=t.split(`
`),a=0;a<r.length;++a)e.fillText(r[a],n,o),o+=i}class L extends D{start(){s.Composite.allBodies(f.world).map(o=>{s.World.remove(f.world,o)}),M(f,p).toyBodies.map(o=>{o.isStatic=!0;const i=+o.label;d.isPurchased(i)||b(o,O)}),ne().map(o=>{const i=p[+o.label],r={text:i.name+`
$`+i.price,x:o.position.x,y:o.position.y+40};I.push(r)})}startDrag({body:t}){const n=+t.label,o=p[n];b(t,o.color)}endDrag({body:t}){const n=+t.label,o=p[n];b(t,o.color),d.isPurchased(n)?R(te):d.getBank()>=o.price?(d.buyToy(n),b(t,o.color)):b(t,O)}}const se=3;class ie{constructor(){v(this,"bankMoney",se);v(this,"earn",0);v(this,"purchased",[]);const t=localStorage.getItem(k.bank);t&&(this.bankMoney=+t);const n=localStorage.getItem(k.purchased);n&&(this.purchased=JSON.parse(n))}setEarn(t){this.earn=t}cashOut(){this.setBankMoney(this.bankMoney+this.earn),R(L)}setBankMoney(t){this.bankMoney=t;const n=this.bankMoney.toString();localStorage.setItem(k.bank,n)}buyToy(t){const n=p[t];this.setBankMoney(this.bankMoney-n.price),this.purchased.push(t),this.purchased=[...new Set(this.purchased)];const o=JSON.stringify(this.purchased);localStorage.setItem(k.purchased,o)}getBank(){return this.bankMoney}isPurchased(t){return this.purchased.indexOf(t)>=0}purchasedToys(){return this.purchased.map(t=>p[t])}}function re(e){f=e,d=new ie,R(L),window._game=d,ee(e)}window.addEventListener("load",()=>{const e=J();re(e)});
