var _=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function he(I){return I&&I.__esModule&&Object.prototype.hasOwnProperty.call(I,"default")?I.default:I}var se={exports:{}};/*!
 * matter-js 0.17.1 by @liabru
 * http://brm.io/matter-js/
 * License MIT
 * 
 * The MIT License (MIT)
 * 
 * Copyright (c) Liam Brummitt and contributors.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 */(function(I,A){(function(B,h){I.exports=h()})(_,function(){return function(C){var B={};function h(e){if(B[e])return B[e].exports;var o=B[e]={i:e,l:!1,exports:{}};return C[e].call(o.exports,o,o.exports,h),o.l=!0,o.exports}return h.m=C,h.c=B,h.d=function(e,o,n){h.o(e,o)||Object.defineProperty(e,o,{enumerable:!0,get:n})},h.r=function(e){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},h.t=function(e,o){if(o&1&&(e=h(e)),o&8||o&4&&typeof e=="object"&&e&&e.__esModule)return e;var n=Object.create(null);if(h.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),o&2&&typeof e!="string")for(var r in e)h.d(n,r,function(c){return e[c]}.bind(null,r));return n},h.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return h.d(o,"a",o),o},h.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},h.p="",h(h.s=22)}([function(C,B){var h={};C.exports=h,function(){h._nextId=0,h._seed=0,h._nowStartTime=+new Date,h._warnedOnce={},h._decomp=null,h.extend=function(o,n){var r,c;typeof n=="boolean"?(r=2,c=n):(r=1,c=!0);for(var s=r;s<arguments.length;s++){var u=arguments[s];if(u)for(var a in u)c&&u[a]&&u[a].constructor===Object&&(!o[a]||o[a].constructor===Object)?(o[a]=o[a]||{},h.extend(o[a],c,u[a])):o[a]=u[a]}return o},h.clone=function(o,n){return h.extend({},n,o)},h.keys=function(o){if(Object.keys)return Object.keys(o);var n=[];for(var r in o)n.push(r);return n},h.values=function(o){var n=[];if(Object.keys){for(var r=Object.keys(o),c=0;c<r.length;c++)n.push(o[r[c]]);return n}for(var s in o)n.push(o[s]);return n},h.get=function(o,n,r,c){n=n.split(".").slice(r,c);for(var s=0;s<n.length;s+=1)o=o[n[s]];return o},h.set=function(o,n,r,c,s){var u=n.split(".").slice(c,s);return h.get(o,n,0,-1)[u[u.length-1]]=r,r},h.shuffle=function(o){for(var n=o.length-1;n>0;n--){var r=Math.floor(h.random()*(n+1)),c=o[n];o[n]=o[r],o[r]=c}return o},h.choose=function(o){return o[Math.floor(h.random()*o.length)]},h.isElement=function(o){return typeof HTMLElement!="undefined"?o instanceof HTMLElement:!!(o&&o.nodeType&&o.nodeName)},h.isArray=function(o){return Object.prototype.toString.call(o)==="[object Array]"},h.isFunction=function(o){return typeof o=="function"},h.isPlainObject=function(o){return typeof o=="object"&&o.constructor===Object},h.isString=function(o){return toString.call(o)==="[object String]"},h.clamp=function(o,n,r){return o<n?n:o>r?r:o},h.sign=function(o){return o<0?-1:1},h.now=function(){if(typeof window!="undefined"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-h._nowStartTime},h.random=function(o,n){return o=typeof o!="undefined"?o:0,n=typeof n!="undefined"?n:1,o+e()*(n-o)};var e=function(){return h._seed=(h._seed*9301+49297)%233280,h._seed/233280};h.colorToNumber=function(o){return o=o.replace("#",""),o.length==3&&(o=o.charAt(0)+o.charAt(0)+o.charAt(1)+o.charAt(1)+o.charAt(2)+o.charAt(2)),parseInt(o,16)},h.logLevel=1,h.log=function(){console&&h.logLevel>0&&h.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.info=function(){console&&h.logLevel>0&&h.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.warn=function(){console&&h.logLevel>0&&h.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},h.warnOnce=function(){var o=Array.prototype.slice.call(arguments).join(" ");h._warnedOnce[o]||(h.warn(o),h._warnedOnce[o]=!0)},h.deprecated=function(o,n,r){o[n]=h.chain(function(){h.warnOnce("\u{1F505} deprecated \u{1F505}",r)},o[n])},h.nextId=function(){return h._nextId++},h.indexOf=function(o,n){if(o.indexOf)return o.indexOf(n);for(var r=0;r<o.length;r++)if(o[r]===n)return r;return-1},h.map=function(o,n){if(o.map)return o.map(n);for(var r=[],c=0;c<o.length;c+=1)r.push(n(o[c]));return r},h.topologicalSort=function(o){var n=[],r=[],c=[];for(var s in o)!r[s]&&!c[s]&&h._topologicalSort(s,r,c,o,n);return n},h._topologicalSort=function(o,n,r,c,s){var u=c[o]||[];r[o]=!0;for(var a=0;a<u.length;a+=1){var t=u[a];r[t]||n[t]||h._topologicalSort(t,n,r,c,s)}r[o]=!1,n[o]=!0,s.push(o)},h.chain=function(){for(var o=[],n=0;n<arguments.length;n+=1){var r=arguments[n];r._chained?o.push.apply(o,r._chained):o.push(r)}var c=function(){for(var s,u=new Array(arguments.length),a=0,t=arguments.length;a<t;a++)u[a]=arguments[a];for(a=0;a<o.length;a+=1){var i=o[a].apply(s,u);typeof i!="undefined"&&(s=i)}return s};return c._chained=o,c},h.chainPathBefore=function(o,n,r){return h.set(o,n,h.chain(r,h.get(o,n)))},h.chainPathAfter=function(o,n,r){return h.set(o,n,h.chain(h.get(o,n),r))},h.setDecomp=function(o){h._decomp=o},h.getDecomp=function(){var o=h._decomp;try{!o&&typeof window!="undefined"&&(o=window.decomp),!o&&typeof _!="undefined"&&(o=_.decomp)}catch(n){o=null}return o}}()},function(C,B){var h={};C.exports=h,function(){h.create=function(e){var o={min:{x:0,y:0},max:{x:0,y:0}};return e&&h.update(o,e),o},h.update=function(e,o,n){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var r=0;r<o.length;r++){var c=o[r];c.x>e.max.x&&(e.max.x=c.x),c.x<e.min.x&&(e.min.x=c.x),c.y>e.max.y&&(e.max.y=c.y),c.y<e.min.y&&(e.min.y=c.y)}n&&(n.x>0?e.max.x+=n.x:e.min.x+=n.x,n.y>0?e.max.y+=n.y:e.min.y+=n.y)},h.contains=function(e,o){return o.x>=e.min.x&&o.x<=e.max.x&&o.y>=e.min.y&&o.y<=e.max.y},h.overlaps=function(e,o){return e.min.x<=o.max.x&&e.max.x>=o.min.x&&e.max.y>=o.min.y&&e.min.y<=o.max.y},h.translate=function(e,o){e.min.x+=o.x,e.max.x+=o.x,e.min.y+=o.y,e.max.y+=o.y},h.shift=function(e,o){var n=e.max.x-e.min.x,r=e.max.y-e.min.y;e.min.x=o.x,e.max.x=o.x+n,e.min.y=o.y,e.max.y=o.y+r}}()},function(C,B){var h={};C.exports=h,function(){h.create=function(e,o){return{x:e||0,y:o||0}},h.clone=function(e){return{x:e.x,y:e.y}},h.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},h.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},h.rotate=function(e,o,n){var r=Math.cos(o),c=Math.sin(o);n||(n={});var s=e.x*r-e.y*c;return n.y=e.x*c+e.y*r,n.x=s,n},h.rotateAbout=function(e,o,n,r){var c=Math.cos(o),s=Math.sin(o);r||(r={});var u=n.x+((e.x-n.x)*c-(e.y-n.y)*s);return r.y=n.y+((e.x-n.x)*s+(e.y-n.y)*c),r.x=u,r},h.normalise=function(e){var o=h.magnitude(e);return o===0?{x:0,y:0}:{x:e.x/o,y:e.y/o}},h.dot=function(e,o){return e.x*o.x+e.y*o.y},h.cross=function(e,o){return e.x*o.y-e.y*o.x},h.cross3=function(e,o,n){return(o.x-e.x)*(n.y-e.y)-(o.y-e.y)*(n.x-e.x)},h.add=function(e,o,n){return n||(n={}),n.x=e.x+o.x,n.y=e.y+o.y,n},h.sub=function(e,o,n){return n||(n={}),n.x=e.x-o.x,n.y=e.y-o.y,n},h.mult=function(e,o){return{x:e.x*o,y:e.y*o}},h.div=function(e,o){return{x:e.x/o,y:e.y/o}},h.perp=function(e,o){return o=o===!0?-1:1,{x:o*-e.y,y:o*e.x}},h.neg=function(e){return{x:-e.x,y:-e.y}},h.angle=function(e,o){return Math.atan2(o.y-e.y,o.x-e.x)},h._temp=[h.create(),h.create(),h.create(),h.create(),h.create(),h.create()]}()},function(C,B,h){var e={};C.exports=e;var o=h(2),n=h(0);(function(){e.create=function(r,c){for(var s=[],u=0;u<r.length;u++){var a=r[u],t={x:a.x,y:a.y,index:u,body:c,isInternal:!1};s.push(t)}return s},e.fromPath=function(r,c){var s=/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/ig,u=[];return r.replace(s,function(a,t,i){u.push({x:parseFloat(t),y:parseFloat(i)})}),e.create(u,c)},e.centre=function(r){for(var c=e.area(r,!0),s={x:0,y:0},u,a,t,i=0;i<r.length;i++)t=(i+1)%r.length,u=o.cross(r[i],r[t]),a=o.mult(o.add(r[i],r[t]),u),s=o.add(s,a);return o.div(s,6*c)},e.mean=function(r){for(var c={x:0,y:0},s=0;s<r.length;s++)c.x+=r[s].x,c.y+=r[s].y;return o.div(c,r.length)},e.area=function(r,c){for(var s=0,u=r.length-1,a=0;a<r.length;a++)s+=(r[u].x-r[a].x)*(r[u].y+r[a].y),u=a;return c?s/2:Math.abs(s)/2},e.inertia=function(r,c){for(var s=0,u=0,a=r,t,i,l=0;l<a.length;l++)i=(l+1)%a.length,t=Math.abs(o.cross(a[i],a[l])),s+=t*(o.dot(a[i],a[i])+o.dot(a[i],a[l])+o.dot(a[l],a[l])),u+=t;return c/6*(s/u)},e.translate=function(r,c,s){var u;if(s)for(u=0;u<r.length;u++)r[u].x+=c.x*s,r[u].y+=c.y*s;else for(u=0;u<r.length;u++)r[u].x+=c.x,r[u].y+=c.y;return r},e.rotate=function(r,c,s){if(c!==0){for(var u=Math.cos(c),a=Math.sin(c),t=0;t<r.length;t++){var i=r[t],l=i.x-s.x,f=i.y-s.y;i.x=s.x+(l*u-f*a),i.y=s.y+(l*a+f*u)}return r}},e.contains=function(r,c){for(var s=0;s<r.length;s++){var u=r[s],a=r[(s+1)%r.length];if((c.x-u.x)*(a.y-u.y)+(c.y-u.y)*(u.x-a.x)>0)return!1}return!0},e.scale=function(r,c,s,u){if(c===1&&s===1)return r;u=u||e.centre(r);for(var a,t,i=0;i<r.length;i++)a=r[i],t=o.sub(a,u),r[i].x=u.x+t.x*c,r[i].y=u.y+t.y*s;return r},e.chamfer=function(r,c,s,u,a){typeof c=="number"?c=[c]:c=c||[8],s=typeof s!="undefined"?s:-1,u=u||2,a=a||14;for(var t=[],i=0;i<r.length;i++){var l=r[i-1>=0?i-1:r.length-1],f=r[i],x=r[(i+1)%r.length],y=c[i<c.length?i:c.length-1];if(y===0){t.push(f);continue}var d=o.normalise({x:f.y-l.y,y:l.x-f.x}),v=o.normalise({x:x.y-f.y,y:f.x-x.x}),m=Math.sqrt(2*Math.pow(y,2)),p=o.mult(n.clone(d),y),g=o.normalise(o.mult(o.add(d,v),.5)),P=o.sub(f,o.mult(g,m)),w=s;s===-1&&(w=Math.pow(y,.32)*1.75),w=n.clamp(w,u,a),w%2==1&&(w+=1);for(var M=Math.acos(o.dot(d,v)),S=M/w,T=0;T<w;T++)t.push(o.add(o.rotate(p,S*T),P))}return t},e.clockwiseSort=function(r){var c=e.mean(r);return r.sort(function(s,u){return o.angle(c,s)-o.angle(c,u)}),r},e.isConvex=function(r){var c=0,s=r.length,u,a,t,i;if(s<3)return null;for(u=0;u<s;u++)if(a=(u+1)%s,t=(u+2)%s,i=(r[a].x-r[u].x)*(r[t].y-r[a].y),i-=(r[a].y-r[u].y)*(r[t].x-r[a].x),i<0?c|=1:i>0&&(c|=2),c===3)return!1;return c!==0?!0:null},e.hull=function(r){var c=[],s=[],u,a;for(r=r.slice(0),r.sort(function(t,i){var l=t.x-i.x;return l!==0?l:t.y-i.y}),a=0;a<r.length;a+=1){for(u=r[a];s.length>=2&&o.cross3(s[s.length-2],s[s.length-1],u)<=0;)s.pop();s.push(u)}for(a=r.length-1;a>=0;a-=1){for(u=r[a];c.length>=2&&o.cross3(c[c.length-2],c[c.length-1],u)<=0;)c.pop();c.push(u)}return c.pop(),s.pop(),c.concat(s)}})()},function(C,B,h){var e={};C.exports=e;var o=h(0);(function(){e.on=function(n,r,c){for(var s=r.split(" "),u,a=0;a<s.length;a++)u=s[a],n.events=n.events||{},n.events[u]=n.events[u]||[],n.events[u].push(c);return c},e.off=function(n,r,c){if(!r){n.events={};return}typeof r=="function"&&(c=r,r=o.keys(n.events).join(" "));for(var s=r.split(" "),u=0;u<s.length;u++){var a=n.events[s[u]],t=[];if(c&&a)for(var i=0;i<a.length;i++)a[i]!==c&&t.push(a[i]);n.events[s[u]]=t}},e.trigger=function(n,r,c){var s,u,a,t,i=n.events;if(i&&o.keys(i).length>0){c||(c={}),s=r.split(" ");for(var l=0;l<s.length;l++)if(u=s[l],a=i[u],a){t=o.clone(c,!1),t.name=u,t.source=n;for(var f=0;f<a.length;f++)a[f].apply(n,[t])}}}})()},function(C,B,h){var e={};C.exports=e;var o=h(4),n=h(0),r=h(1),c=h(6);(function(){e.create=function(s){return n.extend({id:n.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},s)},e.setModified=function(s,u,a,t){if(s.isModified=u,a&&s.parent&&e.setModified(s.parent,u,a,t),t)for(var i=0;i<s.composites.length;i++){var l=s.composites[i];e.setModified(l,u,a,t)}},e.add=function(s,u){var a=[].concat(u);o.trigger(s,"beforeAdd",{object:u});for(var t=0;t<a.length;t++){var i=a[t];switch(i.type){case"body":if(i.parent!==i){n.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}e.addBody(s,i);break;case"constraint":e.addConstraint(s,i);break;case"composite":e.addComposite(s,i);break;case"mouseConstraint":e.addConstraint(s,i.constraint);break}}return o.trigger(s,"afterAdd",{object:u}),s},e.remove=function(s,u,a){var t=[].concat(u);o.trigger(s,"beforeRemove",{object:u});for(var i=0;i<t.length;i++){var l=t[i];switch(l.type){case"body":e.removeBody(s,l,a);break;case"constraint":e.removeConstraint(s,l,a);break;case"composite":e.removeComposite(s,l,a);break;case"mouseConstraint":e.removeConstraint(s,l.constraint);break}}return o.trigger(s,"afterRemove",{object:u}),s},e.addComposite=function(s,u){return s.composites.push(u),u.parent=s,e.setModified(s,!0,!0,!1),s},e.removeComposite=function(s,u,a){var t=n.indexOf(s.composites,u);if(t!==-1&&(e.removeCompositeAt(s,t),e.setModified(s,!0,!0,!1)),a)for(var i=0;i<s.composites.length;i++)e.removeComposite(s.composites[i],u,!0);return s},e.removeCompositeAt=function(s,u){return s.composites.splice(u,1),e.setModified(s,!0,!0,!1),s},e.addBody=function(s,u){return s.bodies.push(u),e.setModified(s,!0,!0,!1),s},e.removeBody=function(s,u,a){var t=n.indexOf(s.bodies,u);if(t!==-1&&(e.removeBodyAt(s,t),e.setModified(s,!0,!0,!1)),a)for(var i=0;i<s.composites.length;i++)e.removeBody(s.composites[i],u,!0);return s},e.removeBodyAt=function(s,u){return s.bodies.splice(u,1),e.setModified(s,!0,!0,!1),s},e.addConstraint=function(s,u){return s.constraints.push(u),e.setModified(s,!0,!0,!1),s},e.removeConstraint=function(s,u,a){var t=n.indexOf(s.constraints,u);if(t!==-1&&e.removeConstraintAt(s,t),a)for(var i=0;i<s.composites.length;i++)e.removeConstraint(s.composites[i],u,!0);return s},e.removeConstraintAt=function(s,u){return s.constraints.splice(u,1),e.setModified(s,!0,!0,!1),s},e.clear=function(s,u,a){if(a)for(var t=0;t<s.composites.length;t++)e.clear(s.composites[t],u,!0);return u?s.bodies=s.bodies.filter(function(i){return i.isStatic}):s.bodies.length=0,s.constraints.length=0,s.composites.length=0,e.setModified(s,!0,!0,!1),s},e.allBodies=function(s){for(var u=[].concat(s.bodies),a=0;a<s.composites.length;a++)u=u.concat(e.allBodies(s.composites[a]));return u},e.allConstraints=function(s){for(var u=[].concat(s.constraints),a=0;a<s.composites.length;a++)u=u.concat(e.allConstraints(s.composites[a]));return u},e.allComposites=function(s){for(var u=[].concat(s.composites),a=0;a<s.composites.length;a++)u=u.concat(e.allComposites(s.composites[a]));return u},e.get=function(s,u,a){var t,i;switch(a){case"body":t=e.allBodies(s);break;case"constraint":t=e.allConstraints(s);break;case"composite":t=e.allComposites(s).concat(s);break}return t?(i=t.filter(function(l){return l.id.toString()===u.toString()}),i.length===0?null:i[0]):null},e.move=function(s,u,a){return e.remove(s,u),e.add(a,u),s},e.rebase=function(s){for(var u=e.allBodies(s).concat(e.allConstraints(s)).concat(e.allComposites(s)),a=0;a<u.length;a++)u[a].id=n.nextId();return e.setModified(s,!0,!0,!1),s},e.translate=function(s,u,a){for(var t=a?e.allBodies(s):s.bodies,i=0;i<t.length;i++)c.translate(t[i],u);return e.setModified(s,!0,!0,!1),s},e.rotate=function(s,u,a,t){for(var i=Math.cos(u),l=Math.sin(u),f=t?e.allBodies(s):s.bodies,x=0;x<f.length;x++){var y=f[x],d=y.position.x-a.x,v=y.position.y-a.y;c.setPosition(y,{x:a.x+(d*i-v*l),y:a.y+(d*l+v*i)}),c.rotate(y,u)}return e.setModified(s,!0,!0,!1),s},e.scale=function(s,u,a,t,i){for(var l=i?e.allBodies(s):s.bodies,f=0;f<l.length;f++){var x=l[f],y=x.position.x-t.x,d=x.position.y-t.y;c.setPosition(x,{x:t.x+y*u,y:t.y+d*a}),c.scale(x,u,a)}return e.setModified(s,!0,!0,!1),s},e.bounds=function(s){for(var u=e.allBodies(s),a=[],t=0;t<u.length;t+=1){var i=u[t];a.push(i.bounds.min,i.bounds.max)}return r.create(a)}})()},function(C,B,h){var e={};C.exports=e;var o=h(3),n=h(2),r=h(7);h(16);var c=h(0),s=h(1),u=h(10);(function(){e._inertiaScale=4,e._nextCollidingGroupId=1,e._nextNonCollidingGroupId=-1,e._nextCategory=1,e.create=function(t){var i={id:c.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:o.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,_original:null},l=c.extend(i,t);return a(l,t),l},e.nextGroup=function(t){return t?e._nextNonCollidingGroupId--:e._nextCollidingGroupId++},e.nextCategory=function(){return e._nextCategory=e._nextCategory<<1,e._nextCategory};var a=function(t,i){i=i||{},e.set(t,{bounds:t.bounds||s.create(t.vertices),positionPrev:t.positionPrev||n.clone(t.position),anglePrev:t.anglePrev||t.angle,vertices:t.vertices,parts:t.parts||[t],isStatic:t.isStatic,isSleeping:t.isSleeping,parent:t.parent||t}),o.rotate(t.vertices,t.angle,t.position),u.rotate(t.axes,t.angle),s.update(t.bounds,t.vertices,t.velocity),e.set(t,{axes:i.axes||t.axes,area:i.area||t.area,mass:i.mass||t.mass,inertia:i.inertia||t.inertia});var l=t.isStatic?"#14151f":c.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),f=t.isStatic?"#555":"#ccc",x=t.isStatic&&t.render.fillStyle===null?1:0;t.render.fillStyle=t.render.fillStyle||l,t.render.strokeStyle=t.render.strokeStyle||f,t.render.lineWidth=t.render.lineWidth||x,t.render.sprite.xOffset+=-(t.bounds.min.x-t.position.x)/(t.bounds.max.x-t.bounds.min.x),t.render.sprite.yOffset+=-(t.bounds.min.y-t.position.y)/(t.bounds.max.y-t.bounds.min.y)};e.set=function(t,i,l){var f;typeof i=="string"&&(f=i,i={},i[f]=l);for(f in i)if(!!Object.prototype.hasOwnProperty.call(i,f))switch(l=i[f],f){case"isStatic":e.setStatic(t,l);break;case"isSleeping":r.set(t,l);break;case"mass":e.setMass(t,l);break;case"density":e.setDensity(t,l);break;case"inertia":e.setInertia(t,l);break;case"vertices":e.setVertices(t,l);break;case"position":e.setPosition(t,l);break;case"angle":e.setAngle(t,l);break;case"velocity":e.setVelocity(t,l);break;case"angularVelocity":e.setAngularVelocity(t,l);break;case"parts":e.setParts(t,l);break;case"centre":e.setCentre(t,l);break;default:t[f]=l}},e.setStatic=function(t,i){for(var l=0;l<t.parts.length;l++){var f=t.parts[l];f.isStatic=i,i?(f._original={restitution:f.restitution,friction:f.friction,mass:f.mass,inertia:f.inertia,density:f.density,inverseMass:f.inverseMass,inverseInertia:f.inverseInertia},f.restitution=0,f.friction=1,f.mass=f.inertia=f.density=1/0,f.inverseMass=f.inverseInertia=0,f.positionPrev.x=f.position.x,f.positionPrev.y=f.position.y,f.anglePrev=f.angle,f.angularVelocity=0,f.speed=0,f.angularSpeed=0,f.motion=0):f._original&&(f.restitution=f._original.restitution,f.friction=f._original.friction,f.mass=f._original.mass,f.inertia=f._original.inertia,f.density=f._original.density,f.inverseMass=f._original.inverseMass,f.inverseInertia=f._original.inverseInertia,f._original=null)}},e.setMass=function(t,i){var l=t.inertia/(t.mass/6);t.inertia=l*(i/6),t.inverseInertia=1/t.inertia,t.mass=i,t.inverseMass=1/t.mass,t.density=t.mass/t.area},e.setDensity=function(t,i){e.setMass(t,i*t.area),t.density=i},e.setInertia=function(t,i){t.inertia=i,t.inverseInertia=1/t.inertia},e.setVertices=function(t,i){i[0].body===t?t.vertices=i:t.vertices=o.create(i,t),t.axes=u.fromVertices(t.vertices),t.area=o.area(t.vertices),e.setMass(t,t.density*t.area);var l=o.centre(t.vertices);o.translate(t.vertices,l,-1),e.setInertia(t,e._inertiaScale*o.inertia(t.vertices,t.mass)),o.translate(t.vertices,t.position),s.update(t.bounds,t.vertices,t.velocity)},e.setParts=function(t,i,l){var f;for(i=i.slice(0),t.parts.length=0,t.parts.push(t),t.parent=t,f=0;f<i.length;f++){var x=i[f];x!==t&&(x.parent=t,t.parts.push(x))}if(t.parts.length!==1){if(l=typeof l!="undefined"?l:!0,l){var y=[];for(f=0;f<i.length;f++)y=y.concat(i[f].vertices);o.clockwiseSort(y);var d=o.hull(y),v=o.centre(d);e.setVertices(t,d),o.translate(t.vertices,v)}var m=e._totalProperties(t);t.area=m.area,t.parent=t,t.position.x=m.centre.x,t.position.y=m.centre.y,t.positionPrev.x=m.centre.x,t.positionPrev.y=m.centre.y,e.setMass(t,m.mass),e.setInertia(t,m.inertia),e.setPosition(t,m.centre)}},e.setCentre=function(t,i,l){l?(t.positionPrev.x+=i.x,t.positionPrev.y+=i.y,t.position.x+=i.x,t.position.y+=i.y):(t.positionPrev.x=i.x-(t.position.x-t.positionPrev.x),t.positionPrev.y=i.y-(t.position.y-t.positionPrev.y),t.position.x=i.x,t.position.y=i.y)},e.setPosition=function(t,i){var l=n.sub(i,t.position);t.positionPrev.x+=l.x,t.positionPrev.y+=l.y;for(var f=0;f<t.parts.length;f++){var x=t.parts[f];x.position.x+=l.x,x.position.y+=l.y,o.translate(x.vertices,l),s.update(x.bounds,x.vertices,t.velocity)}},e.setAngle=function(t,i){var l=i-t.angle;t.anglePrev+=l;for(var f=0;f<t.parts.length;f++){var x=t.parts[f];x.angle+=l,o.rotate(x.vertices,l,t.position),u.rotate(x.axes,l),s.update(x.bounds,x.vertices,t.velocity),f>0&&n.rotateAbout(x.position,l,t.position,x.position)}},e.setVelocity=function(t,i){t.positionPrev.x=t.position.x-i.x,t.positionPrev.y=t.position.y-i.y,t.velocity.x=i.x,t.velocity.y=i.y,t.speed=n.magnitude(t.velocity)},e.setAngularVelocity=function(t,i){t.anglePrev=t.angle-i,t.angularVelocity=i,t.angularSpeed=Math.abs(t.angularVelocity)},e.translate=function(t,i){e.setPosition(t,n.add(t.position,i))},e.rotate=function(t,i,l){if(!l)e.setAngle(t,t.angle+i);else{var f=Math.cos(i),x=Math.sin(i),y=t.position.x-l.x,d=t.position.y-l.y;e.setPosition(t,{x:l.x+(y*f-d*x),y:l.y+(y*x+d*f)}),e.setAngle(t,t.angle+i)}},e.scale=function(t,i,l,f){var x=0,y=0;f=f||t.position;for(var d=0;d<t.parts.length;d++){var v=t.parts[d];o.scale(v.vertices,i,l,f),v.axes=u.fromVertices(v.vertices),v.area=o.area(v.vertices),e.setMass(v,t.density*v.area),o.translate(v.vertices,{x:-v.position.x,y:-v.position.y}),e.setInertia(v,e._inertiaScale*o.inertia(v.vertices,v.mass)),o.translate(v.vertices,{x:v.position.x,y:v.position.y}),d>0&&(x+=v.area,y+=v.inertia),v.position.x=f.x+(v.position.x-f.x)*i,v.position.y=f.y+(v.position.y-f.y)*l,s.update(v.bounds,v.vertices,t.velocity)}t.parts.length>1&&(t.area=x,t.isStatic||(e.setMass(t,t.density*x),e.setInertia(t,y))),t.circleRadius&&(i===l?t.circleRadius*=i:t.circleRadius=null)},e.update=function(t,i,l,f){var x=Math.pow(i*l*t.timeScale,2),y=1-t.frictionAir*l*t.timeScale,d=t.position.x-t.positionPrev.x,v=t.position.y-t.positionPrev.y;t.velocity.x=d*y*f+t.force.x/t.mass*x,t.velocity.y=v*y*f+t.force.y/t.mass*x,t.positionPrev.x=t.position.x,t.positionPrev.y=t.position.y,t.position.x+=t.velocity.x,t.position.y+=t.velocity.y,t.angularVelocity=(t.angle-t.anglePrev)*y*f+t.torque/t.inertia*x,t.anglePrev=t.angle,t.angle+=t.angularVelocity,t.speed=n.magnitude(t.velocity),t.angularSpeed=Math.abs(t.angularVelocity);for(var m=0;m<t.parts.length;m++){var p=t.parts[m];o.translate(p.vertices,t.velocity),m>0&&(p.position.x+=t.velocity.x,p.position.y+=t.velocity.y),t.angularVelocity!==0&&(o.rotate(p.vertices,t.angularVelocity,t.position),u.rotate(p.axes,t.angularVelocity),m>0&&n.rotateAbout(p.position,t.angularVelocity,t.position,p.position)),s.update(p.bounds,p.vertices,t.velocity)}},e.applyForce=function(t,i,l){t.force.x+=l.x,t.force.y+=l.y;var f={x:i.x-t.position.x,y:i.y-t.position.y};t.torque+=f.x*l.y-f.y*l.x},e._totalProperties=function(t){for(var i={mass:0,area:0,inertia:0,centre:{x:0,y:0}},l=t.parts.length===1?0:1;l<t.parts.length;l++){var f=t.parts[l],x=f.mass!==1/0?f.mass:1;i.mass+=x,i.area+=f.area,i.inertia+=f.inertia,i.centre=n.add(i.centre,n.mult(f.position,x))}return i.centre=n.div(i.centre,i.mass),i}})()},function(C,B,h){var e={};C.exports=e;var o=h(4);(function(){e._motionWakeThreshold=.18,e._motionSleepThreshold=.08,e._minBias=.9,e.update=function(n,r){for(var c=r*r*r,s=0;s<n.length;s++){var u=n[s],a=u.speed*u.speed+u.angularSpeed*u.angularSpeed;if(u.force.x!==0||u.force.y!==0){e.set(u,!1);continue}var t=Math.min(u.motion,a),i=Math.max(u.motion,a);u.motion=e._minBias*t+(1-e._minBias)*i,u.sleepThreshold>0&&u.motion<e._motionSleepThreshold*c?(u.sleepCounter+=1,u.sleepCounter>=u.sleepThreshold&&e.set(u,!0)):u.sleepCounter>0&&(u.sleepCounter-=1)}},e.afterCollisions=function(n,r){for(var c=r*r*r,s=0;s<n.length;s++){var u=n[s];if(!!u.isActive){var a=u.collision,t=a.bodyA.parent,i=a.bodyB.parent;if(!(t.isSleeping&&i.isSleeping||t.isStatic||i.isStatic)&&(t.isSleeping||i.isSleeping)){var l=t.isSleeping&&!t.isStatic?t:i,f=l===t?i:t;!l.isStatic&&f.motion>e._motionWakeThreshold*c&&e.set(l,!1)}}}},e.set=function(n,r){var c=n.isSleeping;r?(n.isSleeping=!0,n.sleepCounter=n.sleepThreshold,n.positionImpulse.x=0,n.positionImpulse.y=0,n.positionPrev.x=n.position.x,n.positionPrev.y=n.position.y,n.anglePrev=n.angle,n.speed=0,n.angularSpeed=0,n.motion=0,c||o.trigger(n,"sleepStart")):(n.isSleeping=!1,n.sleepCounter=0,c&&o.trigger(n,"sleepEnd"))}})()},function(C,B,h){var e={};C.exports=e;var o=h(3),n=h(2),r=h(7),c=h(1),s=h(10),u=h(0);(function(){e._warming=.4,e._torqueDampen=1,e._minLength=1e-6,e.create=function(a){var t=a;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var i=t.bodyA?n.add(t.bodyA.position,t.pointA):t.pointA,l=t.bodyB?n.add(t.bodyB.position,t.pointB):t.pointB,f=n.magnitude(n.sub(i,l));t.length=typeof t.length!="undefined"?t.length:f,t.id=t.id||u.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var x={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return t.length===0&&t.stiffness>.1?(x.type="pin",x.anchors=!1):t.stiffness<.9&&(x.type="spring"),t.render=u.extend(x,t.render),t},e.preSolveAll=function(a){for(var t=0;t<a.length;t+=1){var i=a[t],l=i.constraintImpulse;i.isStatic||l.x===0&&l.y===0&&l.angle===0||(i.position.x+=l.x,i.position.y+=l.y,i.angle+=l.angle)}},e.solveAll=function(a,t){for(var i=0;i<a.length;i+=1){var l=a[i],f=!l.bodyA||l.bodyA&&l.bodyA.isStatic,x=!l.bodyB||l.bodyB&&l.bodyB.isStatic;(f||x)&&e.solve(a[i],t)}for(i=0;i<a.length;i+=1)l=a[i],f=!l.bodyA||l.bodyA&&l.bodyA.isStatic,x=!l.bodyB||l.bodyB&&l.bodyB.isStatic,!f&&!x&&e.solve(a[i],t)},e.solve=function(a,t){var i=a.bodyA,l=a.bodyB,f=a.pointA,x=a.pointB;if(!(!i&&!l)){i&&!i.isStatic&&(n.rotate(f,i.angle-a.angleA,f),a.angleA=i.angle),l&&!l.isStatic&&(n.rotate(x,l.angle-a.angleB,x),a.angleB=l.angle);var y=f,d=x;if(i&&(y=n.add(i.position,f)),l&&(d=n.add(l.position,x)),!(!y||!d)){var v=n.sub(y,d),m=n.magnitude(v);m<e._minLength&&(m=e._minLength);var p=(m-a.length)/m,g=a.stiffness<1?a.stiffness*t:a.stiffness,P=n.mult(v,p*g),w=(i?i.inverseMass:0)+(l?l.inverseMass:0),M=(i?i.inverseInertia:0)+(l?l.inverseInertia:0),S=w+M,T,R,E,F,D;if(a.damping){var V=n.create();E=n.div(v,m),D=n.sub(l&&n.sub(l.position,l.positionPrev)||V,i&&n.sub(i.position,i.positionPrev)||V),F=n.dot(E,D)}i&&!i.isStatic&&(R=i.inverseMass/w,i.constraintImpulse.x-=P.x*R,i.constraintImpulse.y-=P.y*R,i.position.x-=P.x*R,i.position.y-=P.y*R,a.damping&&(i.positionPrev.x-=a.damping*E.x*F*R,i.positionPrev.y-=a.damping*E.y*F*R),T=n.cross(f,P)/S*e._torqueDampen*i.inverseInertia*(1-a.angularStiffness),i.constraintImpulse.angle-=T,i.angle-=T),l&&!l.isStatic&&(R=l.inverseMass/w,l.constraintImpulse.x+=P.x*R,l.constraintImpulse.y+=P.y*R,l.position.x+=P.x*R,l.position.y+=P.y*R,a.damping&&(l.positionPrev.x+=a.damping*E.x*F*R,l.positionPrev.y+=a.damping*E.y*F*R),T=n.cross(x,P)/S*e._torqueDampen*l.inverseInertia*(1-a.angularStiffness),l.constraintImpulse.angle+=T,l.angle+=T)}}},e.postSolveAll=function(a){for(var t=0;t<a.length;t++){var i=a[t],l=i.constraintImpulse;if(!(i.isStatic||l.x===0&&l.y===0&&l.angle===0)){r.set(i,!1);for(var f=0;f<i.parts.length;f++){var x=i.parts[f];o.translate(x.vertices,l),f>0&&(x.position.x+=l.x,x.position.y+=l.y),l.angle!==0&&(o.rotate(x.vertices,l.angle,i.position),s.rotate(x.axes,l.angle),f>0&&n.rotateAbout(x.position,l.angle,i.position,x.position)),c.update(x.bounds,x.vertices,i.velocity)}l.angle*=e._warming,l.x*=e._warming,l.y*=e._warming}}},e.pointAWorld=function(a){return{x:(a.bodyA?a.bodyA.position.x:0)+a.pointA.x,y:(a.bodyA?a.bodyA.position.y:0)+a.pointA.y}},e.pointBWorld=function(a){return{x:(a.bodyB?a.bodyB.position.x:0)+a.pointB.x,y:(a.bodyB?a.bodyB.position.y:0)+a.pointB.y}}})()},function(C,B,h){var e={};C.exports=e;var o=h(17);(function(){e.create=function(n,r){var c=n.bodyA,s=n.bodyB,u=n.parentA,a=n.parentB,t={id:e.id(c,s),bodyA:c,bodyB:s,contacts:{},activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:c.isSensor||s.isSensor,timeCreated:r,timeUpdated:r,inverseMass:u.inverseMass+a.inverseMass,friction:Math.min(u.friction,a.friction),frictionStatic:Math.max(u.frictionStatic,a.frictionStatic),restitution:Math.max(u.restitution,a.restitution),slop:Math.max(u.slop,a.slop)};return e.update(t,n,r),t},e.update=function(n,r,c){var s=n.contacts,u=r.supports,a=n.activeContacts,t=r.parentA,i=r.parentB;if(n.collision=r,n.inverseMass=t.inverseMass+i.inverseMass,n.friction=Math.min(t.friction,i.friction),n.frictionStatic=Math.max(t.frictionStatic,i.frictionStatic),n.restitution=Math.max(t.restitution,i.restitution),n.slop=Math.max(t.slop,i.slop),a.length=0,r.collided){for(var l=0;l<u.length;l++){var f=u[l],x=o.id(f),y=s[x];y?a.push(y):a.push(s[x]=o.create(f))}n.separation=r.depth,e.setActive(n,!0,c)}else n.isActive===!0&&e.setActive(n,!1,c)},e.setActive=function(n,r,c){r?(n.isActive=!0,n.timeUpdated=c):(n.isActive=!1,n.activeContacts.length=0)},e.id=function(n,r){return n.id<r.id?"A"+n.id+"B"+r.id:"A"+r.id+"B"+n.id}})()},function(C,B,h){var e={};C.exports=e;var o=h(2),n=h(0);(function(){e.fromVertices=function(r){for(var c={},s=0;s<r.length;s++){var u=(s+1)%r.length,a=o.normalise({x:r[u].y-r[s].y,y:r[s].x-r[u].x}),t=a.y===0?1/0:a.x/a.y;t=t.toFixed(3).toString(),c[t]=a}return n.values(c)},e.rotate=function(r,c){if(c!==0)for(var s=Math.cos(c),u=Math.sin(c),a=0;a<r.length;a++){var t=r[a],i;i=t.x*s-t.y*u,t.y=t.x*u+t.y*s,t.x=i}}})()},function(C,B,h){var e={};C.exports=e;var o=h(3),n=h(0),r=h(6),c=h(1),s=h(2);(function(){e.rectangle=function(u,a,t,i,l){l=l||{};var f={label:"Rectangle Body",position:{x:u,y:a},vertices:o.fromPath("L 0 0 L "+t+" 0 L "+t+" "+i+" L 0 "+i)};if(l.chamfer){var x=l.chamfer;f.vertices=o.chamfer(f.vertices,x.radius,x.quality,x.qualityMin,x.qualityMax),delete l.chamfer}return r.create(n.extend({},f,l))},e.trapezoid=function(u,a,t,i,l,f){f=f||{},l*=.5;var x=(1-l*2)*t,y=t*l,d=y+x,v=d+y,m;l<.5?m="L 0 0 L "+y+" "+-i+" L "+d+" "+-i+" L "+v+" 0":m="L 0 0 L "+d+" "+-i+" L "+v+" 0";var p={label:"Trapezoid Body",position:{x:u,y:a},vertices:o.fromPath(m)};if(f.chamfer){var g=f.chamfer;p.vertices=o.chamfer(p.vertices,g.radius,g.quality,g.qualityMin,g.qualityMax),delete f.chamfer}return r.create(n.extend({},p,f))},e.circle=function(u,a,t,i,l){i=i||{};var f={label:"Circle Body",circleRadius:t};l=l||25;var x=Math.ceil(Math.max(10,Math.min(l,t)));return x%2==1&&(x+=1),e.polygon(u,a,x,t,n.extend({},f,i))},e.polygon=function(u,a,t,i,l){if(l=l||{},t<3)return e.circle(u,a,i,l);for(var f=2*Math.PI/t,x="",y=f*.5,d=0;d<t;d+=1){var v=y+d*f,m=Math.cos(v)*i,p=Math.sin(v)*i;x+="L "+m.toFixed(3)+" "+p.toFixed(3)+" "}var g={label:"Polygon Body",position:{x:u,y:a},vertices:o.fromPath(x)};if(l.chamfer){var P=l.chamfer;g.vertices=o.chamfer(g.vertices,P.radius,P.quality,P.qualityMin,P.qualityMax),delete l.chamfer}return r.create(n.extend({},g,l))},e.fromVertices=function(u,a,t,i,l,f,x,y){var d=n.getDecomp(),v,m,p,g,P,w,M,S,T,R,E;for(v=Boolean(d&&d.quickDecomp),i=i||{},p=[],l=typeof l!="undefined"?l:!1,f=typeof f!="undefined"?f:.01,x=typeof x!="undefined"?x:10,y=typeof y!="undefined"?y:.01,n.isArray(t[0])||(t=[t]),R=0;R<t.length;R+=1)if(w=t[R],g=o.isConvex(w),P=!g,P&&!v&&n.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),g||!v)g?w=o.clockwiseSort(w):w=o.hull(w),p.push({position:{x:u,y:a},vertices:w});else{var F=w.map(function(U){return[U.x,U.y]});d.makeCCW(F),f!==!1&&d.removeCollinearPoints(F,f),y!==!1&&d.removeDuplicatePoints&&d.removeDuplicatePoints(F,y);var D=d.quickDecomp(F);for(M=0;M<D.length;M++){var V=D[M],k=V.map(function(U){return{x:U[0],y:U[1]}});x>0&&o.area(k)<x||p.push({position:o.centre(k),vertices:k})}}for(M=0;M<p.length;M++)p[M]=r.create(n.extend(p[M],i));if(l){var G=5;for(M=0;M<p.length;M++){var H=p[M];for(S=M+1;S<p.length;S++){var O=p[S];if(c.overlaps(H.bounds,O.bounds)){var N=H.vertices,W=O.vertices;for(T=0;T<H.vertices.length;T++)for(E=0;E<O.vertices.length;E++){var Q=s.magnitudeSquared(s.sub(N[(T+1)%N.length],W[E])),X=s.magnitudeSquared(s.sub(N[T],W[(E+1)%W.length]));Q<G&&X<G&&(N[T].isInternal=!0,W[E].isInternal=!0)}}}}}return p.length>1?(m=r.create(n.extend({parts:p.slice(0)},i)),r.setPosition(m,{x:u,y:a}),m):p[0]}})()},function(C,B,h){var e={};C.exports=e;var o=h(0);(function(){e.create=function(n){var r={};return n||o.log("Mouse.create: element was undefined, defaulting to document.body","warn"),r.element=n||document.body,r.absolute={x:0,y:0},r.position={x:0,y:0},r.mousedownPosition={x:0,y:0},r.mouseupPosition={x:0,y:0},r.offset={x:0,y:0},r.scale={x:1,y:1},r.wheelDelta=0,r.button=-1,r.pixelRatio=parseInt(r.element.getAttribute("data-pixel-ratio"),10)||1,r.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},r.mousemove=function(c){var s=e._getRelativeMousePosition(c,r.element,r.pixelRatio),u=c.changedTouches;u&&(r.button=0,c.preventDefault()),r.absolute.x=s.x,r.absolute.y=s.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.sourceEvents.mousemove=c},r.mousedown=function(c){var s=e._getRelativeMousePosition(c,r.element,r.pixelRatio),u=c.changedTouches;u?(r.button=0,c.preventDefault()):r.button=c.button,r.absolute.x=s.x,r.absolute.y=s.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.mousedownPosition.x=r.position.x,r.mousedownPosition.y=r.position.y,r.sourceEvents.mousedown=c},r.mouseup=function(c){var s=e._getRelativeMousePosition(c,r.element,r.pixelRatio),u=c.changedTouches;u&&c.preventDefault(),r.button=-1,r.absolute.x=s.x,r.absolute.y=s.y,r.position.x=r.absolute.x*r.scale.x+r.offset.x,r.position.y=r.absolute.y*r.scale.y+r.offset.y,r.mouseupPosition.x=r.position.x,r.mouseupPosition.y=r.position.y,r.sourceEvents.mouseup=c},r.mousewheel=function(c){r.wheelDelta=Math.max(-1,Math.min(1,c.wheelDelta||-c.detail)),c.preventDefault()},e.setElement(r,r.element),r},e.setElement=function(n,r){n.element=r,r.addEventListener("mousemove",n.mousemove),r.addEventListener("mousedown",n.mousedown),r.addEventListener("mouseup",n.mouseup),r.addEventListener("mousewheel",n.mousewheel),r.addEventListener("DOMMouseScroll",n.mousewheel),r.addEventListener("touchmove",n.mousemove),r.addEventListener("touchstart",n.mousedown),r.addEventListener("touchend",n.mouseup)},e.clearSourceEvents=function(n){n.sourceEvents.mousemove=null,n.sourceEvents.mousedown=null,n.sourceEvents.mouseup=null,n.sourceEvents.mousewheel=null,n.wheelDelta=0},e.setOffset=function(n,r){n.offset.x=r.x,n.offset.y=r.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e.setScale=function(n,r){n.scale.x=r.x,n.scale.y=r.y,n.position.x=n.absolute.x*n.scale.x+n.offset.x,n.position.y=n.absolute.y*n.scale.y+n.offset.y},e._getRelativeMousePosition=function(n,r,c){var s=r.getBoundingClientRect(),u=document.documentElement||document.body.parentNode||document.body,a=window.pageXOffset!==void 0?window.pageXOffset:u.scrollLeft,t=window.pageYOffset!==void 0?window.pageYOffset:u.scrollTop,i=n.changedTouches,l,f;return i?(l=i[0].pageX-s.left-a,f=i[0].pageY-s.top-t):(l=n.pageX-s.left-a,f=n.pageY-s.top-t),{x:l/(r.clientWidth/(r.width||r.clientWidth)*c),y:f/(r.clientHeight/(r.height||r.clientHeight)*c)}}})()},function(C,B,h){var e={};C.exports=e;var o=h(14),n=h(9),r=h(1);(function(){e.collisions=function(c,s){for(var u=[],a=s.pairs.table,t=0;t<c.length;t++){var i=c[t][0],l=c[t][1];if(!((i.isStatic||i.isSleeping)&&(l.isStatic||l.isSleeping))&&!!e.canCollide(i.collisionFilter,l.collisionFilter)&&r.overlaps(i.bounds,l.bounds))for(var f=i.parts.length>1?1:0;f<i.parts.length;f++)for(var x=i.parts[f],y=l.parts.length>1?1:0;y<l.parts.length;y++){var d=l.parts[y];if(x===i&&d===l||r.overlaps(x.bounds,d.bounds)){var v=n.id(x,d),m=a[v],p;m&&m.isActive?p=m.collision:p=null;var g=o.collides(x,d,p);g.collided&&u.push(g)}}}return u},e.canCollide=function(c,s){return c.group===s.group&&c.group!==0?c.group>0:(c.mask&s.category)!=0&&(s.mask&c.category)!=0}})()},function(C,B,h){var e={};C.exports=e;var o=h(3),n=h(2);(function(){e.collides=function(r,c,s){var u,a,t,i,l=!1;if(s){var f=r.parent,x=c.parent,y=f.speed*f.speed+f.angularSpeed*f.angularSpeed+x.speed*x.speed+x.angularSpeed*x.angularSpeed;l=s&&s.collided&&y<.2,i=s}else i={collided:!1,bodyA:r,bodyB:c};if(s&&l){var d=i.axisBody,v=d===r?c:r,m=[d.axes[s.axisNumber]];if(t=e._overlapAxes(d.vertices,v.vertices,m),i.reused=!0,t.overlap<=0)return i.collided=!1,i}else{if(u=e._overlapAxes(r.vertices,c.vertices,r.axes),u.overlap<=0||(a=e._overlapAxes(c.vertices,r.vertices,c.axes),a.overlap<=0))return i.collided=!1,i;u.overlap<a.overlap?(t=u,i.axisBody=r):(t=a,i.axisBody=c),i.axisNumber=t.axisNumber}i.bodyA=r.id<c.id?r:c,i.bodyB=r.id<c.id?c:r,i.collided=!0,i.depth=t.overlap,i.parentA=i.bodyA.parent,i.parentB=i.bodyB.parent,r=i.bodyA,c=i.bodyB,n.dot(t.axis,n.sub(c.position,r.position))<0?i.normal={x:t.axis.x,y:t.axis.y}:i.normal={x:-t.axis.x,y:-t.axis.y},i.tangent=n.perp(i.normal),i.penetration=i.penetration||{},i.penetration.x=i.normal.x*i.depth,i.penetration.y=i.normal.y*i.depth;var p=e._findSupports(r,c,i.normal),g=[];if(o.contains(r.vertices,p[0])&&g.push(p[0]),o.contains(r.vertices,p[1])&&g.push(p[1]),g.length<2){var P=e._findSupports(c,r,n.neg(i.normal));o.contains(c.vertices,P[0])&&g.push(P[0]),g.length<2&&o.contains(c.vertices,P[1])&&g.push(P[1])}return g.length<1&&(g=[p[0]]),i.supports=g,i},e._overlapAxes=function(r,c,s){for(var u=n._temp[0],a=n._temp[1],t={overlap:Number.MAX_VALUE},i,l,f=0;f<s.length;f++){if(l=s[f],e._projectToAxis(u,r,l),e._projectToAxis(a,c,l),i=Math.min(u.max-a.min,a.max-u.min),i<=0)return t.overlap=i,t;i<t.overlap&&(t.overlap=i,t.axis=l,t.axisNumber=f)}return t},e._projectToAxis=function(r,c,s){for(var u=n.dot(c[0],s),a=u,t=1;t<c.length;t+=1){var i=n.dot(c[t],s);i>a?a=i:i<u&&(u=i)}r.min=u,r.max=a},e._findSupports=function(r,c,s){for(var u=Number.MAX_VALUE,a=n._temp[0],t=c.vertices,i=r.position,l,f,x,y,d=0;d<t.length;d++)f=t[d],a.x=f.x-i.x,a.y=f.y-i.y,l=-n.dot(s,a),l<u&&(u=l,x=f);var v=x.index-1>=0?x.index-1:t.length-1;f=t[v],a.x=f.x-i.x,a.y=f.y-i.y,u=-n.dot(s,a),y=f;var m=(x.index+1)%t.length;return f=t[m],a.x=f.x-i.x,a.y=f.y-i.y,l=-n.dot(s,a),l<u&&(y=f),[x,y]}})()},function(C,B,h){var e={};C.exports=e;var o=h(0);(function(){e._registry={},e.register=function(n){if(e.isPlugin(n)||o.warn("Plugin.register:",e.toString(n),"does not implement all required fields."),n.name in e._registry){var r=e._registry[n.name],c=e.versionParse(n.version).number,s=e.versionParse(r.version).number;c>s?(o.warn("Plugin.register:",e.toString(r),"was upgraded to",e.toString(n)),e._registry[n.name]=n):c<s?o.warn("Plugin.register:",e.toString(r),"can not be downgraded to",e.toString(n)):n!==r&&o.warn("Plugin.register:",e.toString(n),"is already registered to different plugin object")}else e._registry[n.name]=n;return n},e.resolve=function(n){return e._registry[e.dependencyParse(n).name]},e.toString=function(n){return typeof n=="string"?n:(n.name||"anonymous")+"@"+(n.version||n.range||"0.0.0")},e.isPlugin=function(n){return n&&n.name&&n.version&&n.install},e.isUsed=function(n,r){return n.used.indexOf(r)>-1},e.isFor=function(n,r){var c=n.for&&e.dependencyParse(n.for);return!n.for||r.name===c.name&&e.versionSatisfies(r.version,c.range)},e.use=function(n,r){if(n.uses=(n.uses||[]).concat(r||[]),n.uses.length===0){o.warn("Plugin.use:",e.toString(n),"does not specify any dependencies to install.");return}for(var c=e.dependencies(n),s=o.topologicalSort(c),u=[],a=0;a<s.length;a+=1)if(s[a]!==n.name){var t=e.resolve(s[a]);if(!t){u.push("\u274C "+s[a]);continue}e.isUsed(n,t.name)||(e.isFor(t,n)||(o.warn("Plugin.use:",e.toString(t),"is for",t.for,"but installed on",e.toString(n)+"."),t._warned=!0),t.install?t.install(n):(o.warn("Plugin.use:",e.toString(t),"does not specify an install function."),t._warned=!0),t._warned?(u.push("\u{1F536} "+e.toString(t)),delete t._warned):u.push("\u2705 "+e.toString(t)),n.used.push(t.name))}u.length>0&&o.info(u.join("  "))},e.dependencies=function(n,r){var c=e.dependencyParse(n),s=c.name;if(r=r||{},!(s in r)){n=e.resolve(n)||n,r[s]=o.map(n.uses||[],function(a){e.isPlugin(a)&&e.register(a);var t=e.dependencyParse(a),i=e.resolve(a);return i&&!e.versionSatisfies(i.version,t.range)?(o.warn("Plugin.dependencies:",e.toString(i),"does not satisfy",e.toString(t),"used by",e.toString(c)+"."),i._warned=!0,n._warned=!0):i||(o.warn("Plugin.dependencies:",e.toString(a),"used by",e.toString(c),"could not be resolved."),n._warned=!0),t.name});for(var u=0;u<r[s].length;u+=1)e.dependencies(r[s][u],r);return r}},e.dependencyParse=function(n){if(o.isString(n)){var r=/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/;return r.test(n)||o.warn("Plugin.dependencyParse:",n,"is not a valid dependency string."),{name:n.split("@")[0],range:n.split("@")[1]||"*"}}return{name:n.name,range:n.range||n.version}},e.versionParse=function(n){var r=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-]+)?$/;r.test(n)||o.warn("Plugin.versionParse:",n,"is not a valid version or range.");var c=r.exec(n),s=Number(c[4]),u=Number(c[5]),a=Number(c[6]);return{isRange:Boolean(c[1]||c[2]),version:c[3],range:n,operator:c[1]||c[2]||"",major:s,minor:u,patch:a,parts:[s,u,a],prerelease:c[7],number:s*1e8+u*1e4+a}},e.versionSatisfies=function(n,r){r=r||"*";var c=e.versionParse(r),s=e.versionParse(n);if(c.isRange){if(c.operator==="*"||n==="*")return!0;if(c.operator===">")return s.number>c.number;if(c.operator===">=")return s.number>=c.number;if(c.operator==="~")return s.major===c.major&&s.minor===c.minor&&s.patch>=c.patch;if(c.operator==="^")return c.major>0?s.major===c.major&&s.number>=c.number:c.minor>0?s.minor===c.minor&&s.patch>=c.patch:s.patch===c.patch}return n===r||n==="*"}})()},function(C,B,h){var e={};C.exports=e;var o=h(0),n=h(5),r=h(1),c=h(4),s=h(2),u=h(12);(function(){var a,t;typeof window!="undefined"&&(a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(v){window.setTimeout(function(){v(o.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),e._goodFps=30,e._goodDelta=1e3/60,e.create=function(v){var m={controller:e,engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",hasBounds:!!v.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBroadphase:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},p=o.extend(m,v);return p.canvas&&(p.canvas.width=p.options.width||p.canvas.width,p.canvas.height=p.options.height||p.canvas.height),p.mouse=v.mouse,p.engine=v.engine,p.canvas=p.canvas||f(p.options.width,p.options.height),p.context=p.canvas.getContext("2d"),p.textures={},p.bounds=p.bounds||{min:{x:0,y:0},max:{x:p.canvas.width,y:p.canvas.height}},p.options.pixelRatio!==1&&e.setPixelRatio(p,p.options.pixelRatio),o.isElement(p.element)?p.element.appendChild(p.canvas):p.canvas.parentNode||o.log("Render.create: options.element was undefined, render.canvas was created but not appended","warn"),p},e.run=function(v){(function m(p){v.frameRequestId=a(m),i(v,p),e.world(v,p),(v.options.showStats||v.options.showDebug)&&e.stats(v,v.context,p),(v.options.showPerformance||v.options.showDebug)&&e.performance(v,v.context,p)})()},e.stop=function(v){t(v.frameRequestId)},e.setPixelRatio=function(v,m){var p=v.options,g=v.canvas;m==="auto"&&(m=x(g)),p.pixelRatio=m,g.setAttribute("data-pixel-ratio",m),g.width=p.width*m,g.height=p.height*m,g.style.width=p.width+"px",g.style.height=p.height+"px"},e.lookAt=function(v,m,p,g){g=typeof g!="undefined"?g:!0,m=o.isArray(m)?m:[m],p=p||{x:0,y:0};for(var P={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},w=0;w<m.length;w+=1){var M=m[w],S=M.bounds?M.bounds.min:M.min||M.position||M,T=M.bounds?M.bounds.max:M.max||M.position||M;S&&T&&(S.x<P.min.x&&(P.min.x=S.x),T.x>P.max.x&&(P.max.x=T.x),S.y<P.min.y&&(P.min.y=S.y),T.y>P.max.y&&(P.max.y=T.y))}var R=P.max.x-P.min.x+2*p.x,E=P.max.y-P.min.y+2*p.y,F=v.canvas.height,D=v.canvas.width,V=D/F,k=R/E,G=1,H=1;k>V?H=k/V:G=V/k,v.options.hasBounds=!0,v.bounds.min.x=P.min.x,v.bounds.max.x=P.min.x+R*G,v.bounds.min.y=P.min.y,v.bounds.max.y=P.min.y+E*H,g&&(v.bounds.min.x+=R*.5-R*G*.5,v.bounds.max.x+=R*.5-R*G*.5,v.bounds.min.y+=E*.5-E*H*.5,v.bounds.max.y+=E*.5-E*H*.5),v.bounds.min.x-=p.x,v.bounds.max.x-=p.x,v.bounds.min.y-=p.y,v.bounds.max.y-=p.y,v.mouse&&(u.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.canvas.width,y:(v.bounds.max.y-v.bounds.min.y)/v.canvas.height}),u.setOffset(v.mouse,v.bounds.min))},e.startViewTransform=function(v){var m=v.bounds.max.x-v.bounds.min.x,p=v.bounds.max.y-v.bounds.min.y,g=m/v.options.width,P=p/v.options.height;v.context.setTransform(v.options.pixelRatio/g,0,0,v.options.pixelRatio/P,0,0),v.context.translate(-v.bounds.min.x,-v.bounds.min.y)},e.endViewTransform=function(v){v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0)},e.world=function(v,m){var p=o.now(),g=v.engine,P=g.world,w=v.canvas,M=v.context,S=v.options,T=v.timing,R=n.allBodies(P),E=n.allConstraints(P),F=S.wireframes?S.wireframeBackground:S.background,D=[],V=[],k,G={timestamp:g.timing.timestamp};if(c.trigger(v,"beforeRender",G),v.currentBackground!==F&&d(v,F),M.globalCompositeOperation="source-in",M.fillStyle="transparent",M.fillRect(0,0,w.width,w.height),M.globalCompositeOperation="source-over",S.hasBounds){for(k=0;k<R.length;k++){var H=R[k];r.overlaps(H.bounds,v.bounds)&&D.push(H)}for(k=0;k<E.length;k++){var O=E[k],N=O.bodyA,W=O.bodyB,Q=O.pointA,X=O.pointB;N&&(Q=s.add(N.position,O.pointA)),W&&(X=s.add(W.position,O.pointB)),!(!Q||!X)&&(r.contains(v.bounds,Q)||r.contains(v.bounds,X))&&V.push(O)}e.startViewTransform(v),v.mouse&&(u.setScale(v.mouse,{x:(v.bounds.max.x-v.bounds.min.x)/v.options.width,y:(v.bounds.max.y-v.bounds.min.y)/v.options.height}),u.setOffset(v.mouse,v.bounds.min))}else V=E,D=R,v.options.pixelRatio!==1&&v.context.setTransform(v.options.pixelRatio,0,0,v.options.pixelRatio,0,0);!S.wireframes||g.enableSleeping&&S.showSleeping?e.bodies(v,D,M):(S.showConvexHulls&&e.bodyConvexHulls(v,D,M),e.bodyWireframes(v,D,M)),S.showBounds&&e.bodyBounds(v,D,M),(S.showAxes||S.showAngleIndicator)&&e.bodyAxes(v,D,M),S.showPositions&&e.bodyPositions(v,D,M),S.showVelocity&&e.bodyVelocity(v,D,M),S.showIds&&e.bodyIds(v,D,M),S.showSeparations&&e.separations(v,g.pairs.list,M),S.showCollisions&&e.collisions(v,g.pairs.list,M),S.showVertexNumbers&&e.vertexNumbers(v,D,M),S.showMousePosition&&e.mousePosition(v,v.mouse,M),e.constraints(V,M),S.showBroadphase&&e.grid(v,g.grid,M),S.hasBounds&&e.endViewTransform(v),c.trigger(v,"afterRender",G),T.lastElapsed=o.now()-p},e.stats=function(v,m,p){for(var g=v.engine,P=g.world,w=n.allBodies(P),M=0,S=55,T=44,R=0,E=0,F=0;F<w.length;F+=1)M+=w[F].parts.length;var D={Part:M,Body:w.length,Cons:n.allConstraints(P).length,Comp:n.allComposites(P).length,Pair:g.pairs.list.length};m.fillStyle="#0e0f19",m.fillRect(R,E,S*5.5,T),m.font="12px Arial",m.textBaseline="top",m.textAlign="right";for(var V in D){var k=D[V];m.fillStyle="#aaa",m.fillText(V,R+S,E+8),m.fillStyle="#eee",m.fillText(k,R+S,E+26),R+=S}},e.performance=function(v,m){var p=v.engine,g=v.timing,P=g.deltaHistory,w=g.elapsedHistory,M=g.timestampElapsedHistory,S=g.engineDeltaHistory,T=g.engineElapsedHistory,R=p.timing.lastDelta,E=l(P),F=l(w),D=l(S),V=l(T),k=l(M),G=k/E||0,H=1e3/E||0,O=4,N=12,W=60,Q=34,X=10,U=69;m.fillStyle="#0e0f19",m.fillRect(0,50,N*4+W*5+22,Q),e.status(m,X,U,W,O,P.length,Math.round(H)+" fps",H/e._goodFps,function(z){return P[z]/E-1}),e.status(m,X+N+W,U,W,O,S.length,R.toFixed(2)+" dt",e._goodDelta/R,function(z){return S[z]/D-1}),e.status(m,X+(N+W)*2,U,W,O,T.length,V.toFixed(2)+" ut",1-V/e._goodFps,function(z){return T[z]/V-1}),e.status(m,X+(N+W)*3,U,W,O,w.length,F.toFixed(2)+" rt",1-F/e._goodFps,function(z){return w[z]/F-1}),e.status(m,X+(N+W)*4,U,W,O,M.length,G.toFixed(2)+" x",G*G*G,function(z){return(M[z]/P[z]/G||0)-1})},e.status=function(v,m,p,g,P,w,M,S,T){v.strokeStyle="#888",v.fillStyle="#444",v.lineWidth=1,v.fillRect(m,p+7,g,1),v.beginPath(),v.moveTo(m,p+7-P*o.clamp(.4*T(0),-2,2));for(var R=0;R<g;R+=1)v.lineTo(m+R,p+7-(R<w?P*o.clamp(.4*T(R),-2,2):0));v.stroke(),v.fillStyle="hsl("+o.clamp(25+95*S,0,120)+",100%,60%)",v.fillRect(m,p-7,4,4),v.font="12px Arial",v.textBaseline="middle",v.textAlign="right",v.fillStyle="#eee",v.fillText(M,m+g,p-5)},e.constraints=function(v,m){for(var p=m,g=0;g<v.length;g++){var P=v[g];if(!(!P.render.visible||!P.pointA||!P.pointB)){var w=P.bodyA,M=P.bodyB,S,T;if(w?S=s.add(w.position,P.pointA):S=P.pointA,P.render.type==="pin")p.beginPath(),p.arc(S.x,S.y,3,0,2*Math.PI),p.closePath();else{if(M?T=s.add(M.position,P.pointB):T=P.pointB,p.beginPath(),p.moveTo(S.x,S.y),P.render.type==="spring")for(var R=s.sub(T,S),E=s.perp(s.normalise(R)),F=Math.ceil(o.clamp(P.length/5,12,20)),D,V=1;V<F;V+=1)D=V%2==0?1:-1,p.lineTo(S.x+R.x*(V/F)+E.x*D*4,S.y+R.y*(V/F)+E.y*D*4);p.lineTo(T.x,T.y)}P.render.lineWidth&&(p.lineWidth=P.render.lineWidth,p.strokeStyle=P.render.strokeStyle,p.stroke()),P.render.anchors&&(p.fillStyle=P.render.strokeStyle,p.beginPath(),p.arc(S.x,S.y,3,0,2*Math.PI),p.arc(T.x,T.y,3,0,2*Math.PI),p.closePath(),p.fill())}}},e.bodies=function(v,m,p){var g=p;v.engine;var P=v.options,w=P.showInternalEdges||!P.wireframes,M,S,T,R;for(T=0;T<m.length;T++)if(M=m[T],!!M.render.visible){for(R=M.parts.length>1?1:0;R<M.parts.length;R++)if(S=M.parts[R],!!S.render.visible){if(P.showSleeping&&M.isSleeping?g.globalAlpha=.5*S.render.opacity:S.render.opacity!==1&&(g.globalAlpha=S.render.opacity),S.render.sprite&&S.render.sprite.texture&&!P.wireframes){var E=S.render.sprite,F=y(v,E.texture);g.translate(S.position.x,S.position.y),g.rotate(S.angle),g.drawImage(F,F.width*-E.xOffset*E.xScale,F.height*-E.yOffset*E.yScale,F.width*E.xScale,F.height*E.yScale),g.rotate(-S.angle),g.translate(-S.position.x,-S.position.y)}else{if(S.circleRadius)g.beginPath(),g.arc(S.position.x,S.position.y,S.circleRadius,0,2*Math.PI);else{g.beginPath(),g.moveTo(S.vertices[0].x,S.vertices[0].y);for(var D=1;D<S.vertices.length;D++)!S.vertices[D-1].isInternal||w?g.lineTo(S.vertices[D].x,S.vertices[D].y):g.moveTo(S.vertices[D].x,S.vertices[D].y),S.vertices[D].isInternal&&!w&&g.moveTo(S.vertices[(D+1)%S.vertices.length].x,S.vertices[(D+1)%S.vertices.length].y);g.lineTo(S.vertices[0].x,S.vertices[0].y),g.closePath()}P.wireframes?(g.lineWidth=1,g.strokeStyle="#bbb",g.stroke()):(g.fillStyle=S.render.fillStyle,S.render.lineWidth&&(g.lineWidth=S.render.lineWidth,g.strokeStyle=S.render.strokeStyle,g.stroke()),g.fill())}g.globalAlpha=1}}},e.bodyWireframes=function(v,m,p){var g=p,P=v.options.showInternalEdges,w,M,S,T,R;for(g.beginPath(),S=0;S<m.length;S++)if(w=m[S],!!w.render.visible)for(R=w.parts.length>1?1:0;R<w.parts.length;R++){for(M=w.parts[R],g.moveTo(M.vertices[0].x,M.vertices[0].y),T=1;T<M.vertices.length;T++)!M.vertices[T-1].isInternal||P?g.lineTo(M.vertices[T].x,M.vertices[T].y):g.moveTo(M.vertices[T].x,M.vertices[T].y),M.vertices[T].isInternal&&!P&&g.moveTo(M.vertices[(T+1)%M.vertices.length].x,M.vertices[(T+1)%M.vertices.length].y);g.lineTo(M.vertices[0].x,M.vertices[0].y)}g.lineWidth=1,g.strokeStyle="#bbb",g.stroke()},e.bodyConvexHulls=function(v,m,p){var g=p,P,w,M;for(g.beginPath(),w=0;w<m.length;w++)if(P=m[w],!(!P.render.visible||P.parts.length===1)){for(g.moveTo(P.vertices[0].x,P.vertices[0].y),M=1;M<P.vertices.length;M++)g.lineTo(P.vertices[M].x,P.vertices[M].y);g.lineTo(P.vertices[0].x,P.vertices[0].y)}g.lineWidth=1,g.strokeStyle="rgba(255,255,255,0.2)",g.stroke()},e.vertexNumbers=function(v,m,p){var g=p,P,w,M;for(P=0;P<m.length;P++){var S=m[P].parts;for(M=S.length>1?1:0;M<S.length;M++){var T=S[M];for(w=0;w<T.vertices.length;w++)g.fillStyle="rgba(255,255,255,0.2)",g.fillText(P+"_"+w,T.position.x+(T.vertices[w].x-T.position.x)*.8,T.position.y+(T.vertices[w].y-T.position.y)*.8)}}},e.mousePosition=function(v,m,p){var g=p;g.fillStyle="rgba(255,255,255,0.8)",g.fillText(m.position.x+"  "+m.position.y,m.position.x+5,m.position.y-5)},e.bodyBounds=function(v,m,p){var g=p;v.engine;var P=v.options;g.beginPath();for(var w=0;w<m.length;w++){var M=m[w];if(M.render.visible)for(var S=m[w].parts,T=S.length>1?1:0;T<S.length;T++){var R=S[T];g.rect(R.bounds.min.x,R.bounds.min.y,R.bounds.max.x-R.bounds.min.x,R.bounds.max.y-R.bounds.min.y)}}P.wireframes?g.strokeStyle="rgba(255,255,255,0.08)":g.strokeStyle="rgba(0,0,0,0.1)",g.lineWidth=1,g.stroke()},e.bodyAxes=function(v,m,p){var g=p;v.engine;var P=v.options,w,M,S,T;for(g.beginPath(),M=0;M<m.length;M++){var R=m[M],E=R.parts;if(!!R.render.visible)if(P.showAxes)for(S=E.length>1?1:0;S<E.length;S++)for(w=E[S],T=0;T<w.axes.length;T++){var F=w.axes[T];g.moveTo(w.position.x,w.position.y),g.lineTo(w.position.x+F.x*20,w.position.y+F.y*20)}else for(S=E.length>1?1:0;S<E.length;S++)for(w=E[S],T=0;T<w.axes.length;T++)g.moveTo(w.position.x,w.position.y),g.lineTo((w.vertices[0].x+w.vertices[w.vertices.length-1].x)/2,(w.vertices[0].y+w.vertices[w.vertices.length-1].y)/2)}P.wireframes?(g.strokeStyle="indianred",g.lineWidth=1):(g.strokeStyle="rgba(255, 255, 255, 0.4)",g.globalCompositeOperation="overlay",g.lineWidth=2),g.stroke(),g.globalCompositeOperation="source-over"},e.bodyPositions=function(v,m,p){var g=p;v.engine;var P=v.options,w,M,S,T;for(g.beginPath(),S=0;S<m.length;S++)if(w=m[S],!!w.render.visible)for(T=0;T<w.parts.length;T++)M=w.parts[T],g.arc(M.position.x,M.position.y,3,0,2*Math.PI,!1),g.closePath();for(P.wireframes?g.fillStyle="indianred":g.fillStyle="rgba(0,0,0,0.5)",g.fill(),g.beginPath(),S=0;S<m.length;S++)w=m[S],w.render.visible&&(g.arc(w.positionPrev.x,w.positionPrev.y,2,0,2*Math.PI,!1),g.closePath());g.fillStyle="rgba(255,165,0,0.8)",g.fill()},e.bodyVelocity=function(v,m,p){var g=p;g.beginPath();for(var P=0;P<m.length;P++){var w=m[P];!w.render.visible||(g.moveTo(w.position.x,w.position.y),g.lineTo(w.position.x+(w.position.x-w.positionPrev.x)*2,w.position.y+(w.position.y-w.positionPrev.y)*2))}g.lineWidth=3,g.strokeStyle="cornflowerblue",g.stroke()},e.bodyIds=function(v,m,p){var g=p,P,w;for(P=0;P<m.length;P++)if(!!m[P].render.visible){var M=m[P].parts;for(w=M.length>1?1:0;w<M.length;w++){var S=M[w];g.font="12px Arial",g.fillStyle="rgba(255,255,255,0.5)",g.fillText(S.id,S.position.x+10,S.position.y-10)}}},e.collisions=function(v,m,p){var g=p,P=v.options,w,M,S,T;for(g.beginPath(),S=0;S<m.length;S++)if(w=m[S],!!w.isActive)for(M=w.collision,T=0;T<w.activeContacts.length;T++){var R=w.activeContacts[T],E=R.vertex;g.rect(E.x-1.5,E.y-1.5,3.5,3.5)}for(P.wireframes?g.fillStyle="rgba(255,255,255,0.7)":g.fillStyle="orange",g.fill(),g.beginPath(),S=0;S<m.length;S++)if(w=m[S],!!w.isActive&&(M=w.collision,w.activeContacts.length>0)){var F=w.activeContacts[0].vertex.x,D=w.activeContacts[0].vertex.y;w.activeContacts.length===2&&(F=(w.activeContacts[0].vertex.x+w.activeContacts[1].vertex.x)/2,D=(w.activeContacts[0].vertex.y+w.activeContacts[1].vertex.y)/2),M.bodyB===M.supports[0].body||M.bodyA.isStatic===!0?g.moveTo(F-M.normal.x*8,D-M.normal.y*8):g.moveTo(F+M.normal.x*8,D+M.normal.y*8),g.lineTo(F,D)}P.wireframes?g.strokeStyle="rgba(255,165,0,0.7)":g.strokeStyle="orange",g.lineWidth=1,g.stroke()},e.separations=function(v,m,p){var g=p,P=v.options,w,M,S,T,R;for(g.beginPath(),R=0;R<m.length;R++)if(w=m[R],!!w.isActive){M=w.collision,S=M.bodyA,T=M.bodyB;var E=1;!T.isStatic&&!S.isStatic&&(E=.5),T.isStatic&&(E=0),g.moveTo(T.position.x,T.position.y),g.lineTo(T.position.x-M.penetration.x*E,T.position.y-M.penetration.y*E),E=1,!T.isStatic&&!S.isStatic&&(E=.5),S.isStatic&&(E=0),g.moveTo(S.position.x,S.position.y),g.lineTo(S.position.x+M.penetration.x*E,S.position.y+M.penetration.y*E)}P.wireframes?g.strokeStyle="rgba(255,165,0,0.5)":g.strokeStyle="orange",g.stroke()},e.grid=function(v,m,p){var g=p,P=v.options;P.wireframes?g.strokeStyle="rgba(255,180,0,0.1)":g.strokeStyle="rgba(255,180,0,0.5)",g.beginPath();for(var w=o.keys(m.buckets),M=0;M<w.length;M++){var S=w[M];if(!(m.buckets[S].length<2)){var T=S.split(/C|R/);g.rect(.5+parseInt(T[1],10)*m.bucketWidth,.5+parseInt(T[2],10)*m.bucketHeight,m.bucketWidth,m.bucketHeight)}}g.lineWidth=1,g.stroke()},e.inspector=function(v,m){v.engine;var p=v.selected,g=v.render,P=g.options,w;if(P.hasBounds){var M=g.bounds.max.x-g.bounds.min.x,S=g.bounds.max.y-g.bounds.min.y,T=M/g.options.width,R=S/g.options.height;m.scale(1/T,1/R),m.translate(-g.bounds.min.x,-g.bounds.min.y)}for(var E=0;E<p.length;E++){var F=p[E].data;switch(m.translate(.5,.5),m.lineWidth=1,m.strokeStyle="rgba(255,165,0,0.9)",m.setLineDash([1,2]),F.type){case"body":w=F.bounds,m.beginPath(),m.rect(Math.floor(w.min.x-3),Math.floor(w.min.y-3),Math.floor(w.max.x-w.min.x+6),Math.floor(w.max.y-w.min.y+6)),m.closePath(),m.stroke();break;case"constraint":var D=F.pointA;F.bodyA&&(D=F.pointB),m.beginPath(),m.arc(D.x,D.y,10,0,2*Math.PI),m.closePath(),m.stroke();break}m.setLineDash([]),m.translate(-.5,-.5)}v.selectStart!==null&&(m.translate(.5,.5),m.lineWidth=1,m.strokeStyle="rgba(255,165,0,0.6)",m.fillStyle="rgba(255,165,0,0.1)",w=v.selectBounds,m.beginPath(),m.rect(Math.floor(w.min.x),Math.floor(w.min.y),Math.floor(w.max.x-w.min.x),Math.floor(w.max.y-w.min.y)),m.closePath(),m.stroke(),m.fill(),m.translate(-.5,-.5)),P.hasBounds&&m.setTransform(1,0,0,1,0,0)};var i=function(v,m){var p=v.engine,g=v.timing,P=g.historySize,w=p.timing.timestamp;g.delta=m-g.lastTime||e._goodDelta,g.lastTime=m,g.timestampElapsed=w-g.lastTimestamp||0,g.lastTimestamp=w,g.deltaHistory.unshift(g.delta),g.deltaHistory.length=Math.min(g.deltaHistory.length,P),g.engineDeltaHistory.unshift(p.timing.lastDelta),g.engineDeltaHistory.length=Math.min(g.engineDeltaHistory.length,P),g.timestampElapsedHistory.unshift(g.timestampElapsed),g.timestampElapsedHistory.length=Math.min(g.timestampElapsedHistory.length,P),g.engineElapsedHistory.unshift(p.timing.lastElapsed),g.engineElapsedHistory.length=Math.min(g.engineElapsedHistory.length,P),g.elapsedHistory.unshift(g.lastElapsed),g.elapsedHistory.length=Math.min(g.elapsedHistory.length,P)},l=function(v){for(var m=0,p=0;p<v.length;p+=1)m+=v[p];return m/v.length||0},f=function(v,m){var p=document.createElement("canvas");return p.width=v,p.height=m,p.oncontextmenu=function(){return!1},p.onselectstart=function(){return!1},p},x=function(v){var m=v.getContext("2d"),p=window.devicePixelRatio||1,g=m.webkitBackingStorePixelRatio||m.mozBackingStorePixelRatio||m.msBackingStorePixelRatio||m.oBackingStorePixelRatio||m.backingStorePixelRatio||1;return p/g},y=function(v,m){var p=v.textures[m];return p||(p=v.textures[m]=new Image,p.src=m,p)},d=function(v,m){var p=m;/(jpg|gif|png)$/.test(m)&&(p="url("+m+")"),v.canvas.style.background=p,v.canvas.style.backgroundSize="contain",v.currentBackground=m}})()},function(C,B){var h={};C.exports=h,function(){h.create=function(e){return{id:h.id(e),vertex:e,normalImpulse:0,tangentImpulse:0}},h.id=function(e){return e.body.id+"_"+e.index}}()},function(C,B,h){var e={};C.exports=e;var o=h(7),n=h(19),r=h(13),c=h(20),s=h(21),u=h(4),a=h(5),t=h(8),i=h(0),l=h(6);(function(){e.create=function(f){f=f||{};var x={positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},grid:null,gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0}},y=i.extend(x,f);return y.world=f.world||a.create({label:"World"}),y.grid=s.create(f.grid||f.broadphase),y.pairs=c.create(),y.world.gravity=y.gravity,y.broadphase=y.grid,y.metrics={},y},e.update=function(f,x,y){var d=i.now();x=x||1e3/60,y=y||1;var v=f.world,m=f.timing,p=f.grid,g=[],P;m.timestamp+=x*m.timeScale,m.lastDelta=x*m.timeScale;var w={timestamp:m.timestamp};u.trigger(f,"beforeUpdate",w);var M=a.allBodies(v),S=a.allConstraints(v);for(f.enableSleeping&&o.update(M,m.timeScale),e._bodiesApplyGravity(M,f.gravity),e._bodiesUpdate(M,x,m.timeScale,y,v.bounds),t.preSolveAll(M),P=0;P<f.constraintIterations;P++)t.solveAll(S,m.timeScale);t.postSolveAll(M),v.isModified&&s.clear(p),s.update(p,M,f,v.isModified),g=p.pairsList,v.isModified&&a.setModified(v,!1,!1,!0);var T=r.collisions(g,f),R=f.pairs,E=m.timestamp;for(c.update(R,T,E),c.removeOld(R,E),f.enableSleeping&&o.afterCollisions(R.list,m.timeScale),R.collisionStart.length>0&&u.trigger(f,"collisionStart",{pairs:R.collisionStart}),n.preSolvePosition(R.list),P=0;P<f.positionIterations;P++)n.solvePosition(R.list,m.timeScale);for(n.postSolvePosition(M),t.preSolveAll(M),P=0;P<f.constraintIterations;P++)t.solveAll(S,m.timeScale);for(t.postSolveAll(M),n.preSolveVelocity(R.list),P=0;P<f.velocityIterations;P++)n.solveVelocity(R.list,m.timeScale);return R.collisionActive.length>0&&u.trigger(f,"collisionActive",{pairs:R.collisionActive}),R.collisionEnd.length>0&&u.trigger(f,"collisionEnd",{pairs:R.collisionEnd}),e._bodiesClearForces(M),u.trigger(f,"afterUpdate",w),f.timing.lastElapsed=i.now()-d,f},e.merge=function(f,x){if(i.extend(f,x),x.world){f.world=x.world,e.clear(f);for(var y=a.allBodies(f.world),d=0;d<y.length;d++){var v=y[d];o.set(v,!1),v.id=i.nextId()}}},e.clear=function(f){var x=f.world,y=a.allBodies(x);c.clear(f.pairs),s.clear(f.grid),s.update(f.grid,y,f,!0)},e._bodiesClearForces=function(f){for(var x=0;x<f.length;x++){var y=f[x];y.force.x=0,y.force.y=0,y.torque=0}},e._bodiesApplyGravity=function(f,x){var y=typeof x.scale!="undefined"?x.scale:.001;if(!(x.x===0&&x.y===0||y===0))for(var d=0;d<f.length;d++){var v=f[d];v.isStatic||v.isSleeping||(v.force.y+=v.mass*x.y*y,v.force.x+=v.mass*x.x*y)}},e._bodiesUpdate=function(f,x,y,d,v){for(var m=0;m<f.length;m++){var p=f[m];p.isStatic||p.isSleeping||l.update(p,x,y,d)}}})()},function(C,B,h){var e={};C.exports=e;var o=h(3),n=h(2),r=h(0),c=h(1);(function(){e._restingThresh=4,e._restingThreshTangent=6,e._positionDampen=.9,e._positionWarming=.8,e._frictionNormalMultiplier=5,e.preSolvePosition=function(s){var u,a,t;for(u=0;u<s.length;u++)a=s[u],!!a.isActive&&(t=a.activeContacts.length,a.collision.parentA.totalContacts+=t,a.collision.parentB.totalContacts+=t)},e.solvePosition=function(s,u){var a,t,i,l,f,x,y,d,v,m=n._temp[0],p=n._temp[1],g=n._temp[2],P=n._temp[3];for(a=0;a<s.length;a++)t=s[a],!(!t.isActive||t.isSensor)&&(i=t.collision,l=i.parentA,f=i.parentB,x=i.normal,y=n.sub(n.add(f.positionImpulse,f.position,m),n.add(l.positionImpulse,n.sub(f.position,i.penetration,p),g),P),t.separation=n.dot(x,y));for(a=0;a<s.length;a++)t=s[a],!(!t.isActive||t.isSensor)&&(i=t.collision,l=i.parentA,f=i.parentB,x=i.normal,v=(t.separation-t.slop)*u,(l.isStatic||f.isStatic)&&(v*=2),l.isStatic||l.isSleeping||(d=e._positionDampen/l.totalContacts,l.positionImpulse.x+=x.x*v*d,l.positionImpulse.y+=x.y*v*d),f.isStatic||f.isSleeping||(d=e._positionDampen/f.totalContacts,f.positionImpulse.x-=x.x*v*d,f.positionImpulse.y-=x.y*v*d))},e.postSolvePosition=function(s){for(var u=0;u<s.length;u++){var a=s[u];if(a.totalContacts=0,a.positionImpulse.x!==0||a.positionImpulse.y!==0){for(var t=0;t<a.parts.length;t++){var i=a.parts[t];o.translate(i.vertices,a.positionImpulse),c.update(i.bounds,i.vertices,a.velocity),i.position.x+=a.positionImpulse.x,i.position.y+=a.positionImpulse.y}a.positionPrev.x+=a.positionImpulse.x,a.positionPrev.y+=a.positionImpulse.y,n.dot(a.positionImpulse,a.velocity)<0?(a.positionImpulse.x=0,a.positionImpulse.y=0):(a.positionImpulse.x*=e._positionWarming,a.positionImpulse.y*=e._positionWarming)}}},e.preSolveVelocity=function(s){var u,a,t,i,l,f,x,y,d,v,m,p,g,P,w=n._temp[0],M=n._temp[1];for(u=0;u<s.length;u++)if(t=s[u],!(!t.isActive||t.isSensor))for(i=t.activeContacts,l=t.collision,f=l.parentA,x=l.parentB,y=l.normal,d=l.tangent,a=0;a<i.length;a++)v=i[a],m=v.vertex,p=v.normalImpulse,g=v.tangentImpulse,(p!==0||g!==0)&&(w.x=y.x*p+d.x*g,w.y=y.y*p+d.y*g,f.isStatic||f.isSleeping||(P=n.sub(m,f.position,M),f.positionPrev.x+=w.x*f.inverseMass,f.positionPrev.y+=w.y*f.inverseMass,f.anglePrev+=n.cross(P,w)*f.inverseInertia),x.isStatic||x.isSleeping||(P=n.sub(m,x.position,M),x.positionPrev.x-=w.x*x.inverseMass,x.positionPrev.y-=w.y*x.inverseMass,x.anglePrev-=n.cross(P,w)*x.inverseInertia))},e.solveVelocity=function(s,u){for(var a=u*u,t=n._temp[0],i=n._temp[1],l=n._temp[2],f=n._temp[3],x=n._temp[4],y=n._temp[5],d=0;d<s.length;d++){var v=s[d];if(!(!v.isActive||v.isSensor)){var m=v.collision,p=m.parentA,g=m.parentB,P=m.normal,w=m.tangent,M=v.activeContacts,S=1/M.length;p.velocity.x=p.position.x-p.positionPrev.x,p.velocity.y=p.position.y-p.positionPrev.y,g.velocity.x=g.position.x-g.positionPrev.x,g.velocity.y=g.position.y-g.positionPrev.y,p.angularVelocity=p.angle-p.anglePrev,g.angularVelocity=g.angle-g.anglePrev;for(var T=0;T<M.length;T++){var R=M[T],E=R.vertex,F=n.sub(E,p.position,i),D=n.sub(E,g.position,l),V=n.add(p.velocity,n.mult(n.perp(F),p.angularVelocity),f),k=n.add(g.velocity,n.mult(n.perp(D),g.angularVelocity),x),G=n.sub(V,k,y),H=n.dot(P,G),O=n.dot(w,G),N=Math.abs(O),W=r.sign(O),Q=(1+v.restitution)*H,X=r.clamp(v.separation+H,0,1)*e._frictionNormalMultiplier,U=O,z=1/0;N>v.friction*v.frictionStatic*X*a&&(z=N,U=r.clamp(v.friction*W*a,-z,z));var ie=n.cross(F,P),re=n.cross(D,P),ae=S/(p.inverseMass+g.inverseMass+p.inverseInertia*ie*ie+g.inverseInertia*re*re);if(Q*=ae,U*=ae,H<0&&H*H>e._restingThresh*a)R.normalImpulse=0;else{var ce=R.normalImpulse;R.normalImpulse=Math.min(R.normalImpulse+Q,0),Q=R.normalImpulse-ce}if(O*O>e._restingThreshTangent*a)R.tangentImpulse=0;else{var ve=R.tangentImpulse;R.tangentImpulse=r.clamp(R.tangentImpulse+U,-z,z),U=R.tangentImpulse-ve}t.x=P.x*Q+w.x*U,t.y=P.y*Q+w.y*U,p.isStatic||p.isSleeping||(p.positionPrev.x+=t.x*p.inverseMass,p.positionPrev.y+=t.y*p.inverseMass,p.anglePrev+=n.cross(F,t)*p.inverseInertia),g.isStatic||g.isSleeping||(g.positionPrev.x-=t.x*g.inverseMass,g.positionPrev.y-=t.y*g.inverseMass,g.anglePrev-=n.cross(D,t)*g.inverseInertia)}}}}})()},function(C,B,h){var e={};C.exports=e;var o=h(9),n=h(0);(function(){e._pairMaxIdleLife=1e3,e.create=function(r){return n.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},r)},e.update=function(r,c,s){var u=r.list,a=r.table,t=r.collisionStart,i=r.collisionEnd,l=r.collisionActive,f,x,y,d;for(t.length=0,i.length=0,l.length=0,d=0;d<u.length;d++)u[d].confirmedActive=!1;for(d=0;d<c.length;d++)f=c[d],f.collided&&(x=o.id(f.bodyA,f.bodyB),y=a[x],y?(y.isActive?l.push(y):t.push(y),o.update(y,f,s),y.confirmedActive=!0):(y=o.create(f,s),a[x]=y,t.push(y),u.push(y)));for(d=0;d<u.length;d++)y=u[d],y.isActive&&!y.confirmedActive&&(o.setActive(y,!1,s),i.push(y))},e.removeOld=function(r,c){var s=r.list,u=r.table,a=[],t,i,l,f;for(f=0;f<s.length;f++){if(t=s[f],i=t.collision,i.bodyA.isSleeping||i.bodyB.isSleeping){t.timeUpdated=c;continue}c-t.timeUpdated>e._pairMaxIdleLife&&a.push(f)}for(f=0;f<a.length;f++)l=a[f]-f,t=s[l],delete u[t.id],s.splice(l,1)},e.clear=function(r){return r.table={},r.list.length=0,r.collisionStart.length=0,r.collisionActive.length=0,r.collisionEnd.length=0,r}})()},function(C,B,h){var e={};C.exports=e;var o=h(9),n=h(0);(function(){e.create=function(r){var c={buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48};return n.extend(c,r)},e.update=function(r,c,s,u){var a,t,i,l=s.world,f=r.buckets,x,y,d=!1;for(a=0;a<c.length;a++){var v=c[a];if(!(v.isSleeping&&!u)&&!(l.bounds&&(v.bounds.max.x<l.bounds.min.x||v.bounds.min.x>l.bounds.max.x||v.bounds.max.y<l.bounds.min.y||v.bounds.min.y>l.bounds.max.y))){var m=e._getRegion(r,v);if(!v.region||m.id!==v.region.id||u){(!v.region||u)&&(v.region=m);var p=e._regionUnion(m,v.region);for(t=p.startCol;t<=p.endCol;t++)for(i=p.startRow;i<=p.endRow;i++){y=e._getBucketId(t,i),x=f[y];var g=t>=m.startCol&&t<=m.endCol&&i>=m.startRow&&i<=m.endRow,P=t>=v.region.startCol&&t<=v.region.endCol&&i>=v.region.startRow&&i<=v.region.endRow;!g&&P&&P&&x&&e._bucketRemoveBody(r,x,v),(v.region===m||g&&!P||u)&&(x||(x=e._createBucket(f,y)),e._bucketAddBody(r,x,v))}v.region=m,d=!0}}}d&&(r.pairsList=e._createActivePairsList(r))},e.clear=function(r){r.buckets={},r.pairs={},r.pairsList=[]},e._regionUnion=function(r,c){var s=Math.min(r.startCol,c.startCol),u=Math.max(r.endCol,c.endCol),a=Math.min(r.startRow,c.startRow),t=Math.max(r.endRow,c.endRow);return e._createRegion(s,u,a,t)},e._getRegion=function(r,c){var s=c.bounds,u=Math.floor(s.min.x/r.bucketWidth),a=Math.floor(s.max.x/r.bucketWidth),t=Math.floor(s.min.y/r.bucketHeight),i=Math.floor(s.max.y/r.bucketHeight);return e._createRegion(u,a,t,i)},e._createRegion=function(r,c,s,u){return{id:r+","+c+","+s+","+u,startCol:r,endCol:c,startRow:s,endRow:u}},e._getBucketId=function(r,c){return"C"+r+"R"+c},e._createBucket=function(r,c){var s=r[c]=[];return s},e._bucketAddBody=function(r,c,s){for(var u=0;u<c.length;u++){var a=c[u];if(!(s.id===a.id||s.isStatic&&a.isStatic)){var t=o.id(s,a),i=r.pairs[t];i?i[2]+=1:r.pairs[t]=[s,a,1]}}c.push(s)},e._bucketRemoveBody=function(r,c,s){c.splice(n.indexOf(c,s),1);for(var u=0;u<c.length;u++){var a=c[u],t=o.id(s,a),i=r.pairs[t];i&&(i[2]-=1)}},e._createActivePairsList=function(r){var c,s,u=[];c=n.keys(r.pairs);for(var a=0;a<c.length;a++)s=r.pairs[c[a]],s[2]>0?u.push(s):delete r.pairs[c[a]];return u}})()},function(C,B,h){var e=C.exports=h(23);e.Axes=h(10),e.Bodies=h(11),e.Body=h(6),e.Bounds=h(1),e.Common=h(0),e.Composite=h(5),e.Composites=h(24),e.Constraint=h(8),e.Contact=h(17),e.Detector=h(13),e.Engine=h(18),e.Events=h(4),e.Grid=h(21),e.Mouse=h(12),e.MouseConstraint=h(25),e.Pair=h(9),e.Pairs=h(20),e.Plugin=h(15),e.Query=h(26),e.Render=h(16),e.Resolver=h(19),e.Runner=h(27),e.SAT=h(14),e.Sleeping=h(7),e.Svg=h(28),e.Vector=h(2),e.Vertices=h(3),e.World=h(29),e.Engine.run=e.Runner.run,e.Common.deprecated(e.Engine,"run","Engine.run \u27A4 use Matter.Runner.run(engine) instead")},function(C,B,h){var e={};C.exports=e;var o=h(15),n=h(0);(function(){e.name="matter-js",e.version="0.17.1",e.uses=[],e.used=[],e.use=function(){o.use(e,Array.prototype.slice.call(arguments))},e.before=function(r,c){return r=r.replace(/^Matter./,""),n.chainPathBefore(e,r,c)},e.after=function(r,c){return r=r.replace(/^Matter./,""),n.chainPathAfter(e,r,c)}})()},function(C,B,h){var e={};C.exports=e;var o=h(5),n=h(8),r=h(0),c=h(6),s=h(11),u=r.deprecated;(function(){e.stack=function(a,t,i,l,f,x,y){for(var d=o.create({label:"Stack"}),v=a,m=t,p,g=0,P=0;P<l;P++){for(var w=0,M=0;M<i;M++){var S=y(v,m,M,P,p,g);if(S){var T=S.bounds.max.y-S.bounds.min.y,R=S.bounds.max.x-S.bounds.min.x;T>w&&(w=T),c.translate(S,{x:R*.5,y:T*.5}),v=S.bounds.max.x+f,o.addBody(d,S),p=S,g+=1}else v+=f}m+=w+x,v=a}return d},e.chain=function(a,t,i,l,f,x){for(var y=a.bodies,d=1;d<y.length;d++){var v=y[d-1],m=y[d],p=v.bounds.max.y-v.bounds.min.y,g=v.bounds.max.x-v.bounds.min.x,P=m.bounds.max.y-m.bounds.min.y,w=m.bounds.max.x-m.bounds.min.x,M={bodyA:v,pointA:{x:g*t,y:p*i},bodyB:m,pointB:{x:w*l,y:P*f}},S=r.extend(M,x);o.addConstraint(a,n.create(S))}return a.label+=" Chain",a},e.mesh=function(a,t,i,l,f){var x=a.bodies,y,d,v,m,p;for(y=0;y<i;y++){for(d=1;d<t;d++)v=x[d-1+y*t],m=x[d+y*t],o.addConstraint(a,n.create(r.extend({bodyA:v,bodyB:m},f)));if(y>0)for(d=0;d<t;d++)v=x[d+(y-1)*t],m=x[d+y*t],o.addConstraint(a,n.create(r.extend({bodyA:v,bodyB:m},f))),l&&d>0&&(p=x[d-1+(y-1)*t],o.addConstraint(a,n.create(r.extend({bodyA:p,bodyB:m},f)))),l&&d<t-1&&(p=x[d+1+(y-1)*t],o.addConstraint(a,n.create(r.extend({bodyA:p,bodyB:m},f))))}return a.label+=" Mesh",a},e.pyramid=function(a,t,i,l,f,x,y){return e.stack(a,t,i,l,f,x,function(d,v,m,p,g,P){var w=Math.min(l,Math.ceil(i/2)),M=g?g.bounds.max.x-g.bounds.min.x:0;if(!(p>w)){p=w-p;var S=p,T=i-1-p;if(!(m<S||m>T)){P===1&&c.translate(g,{x:(m+(i%2==1?1:-1))*M,y:0});var R=g?m*M:0;return y(a+R+m*f,v,m,p,g,P)}}})},e.newtonsCradle=function(a,t,i,l,f){for(var x=o.create({label:"Newtons Cradle"}),y=0;y<i;y++){var d=1.9,v=s.circle(a+y*(l*d),t+f,l,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),m=n.create({pointA:{x:a+y*(l*d),y:t},bodyB:v});o.addBody(x,v),o.addConstraint(x,m)}return x},u(e,"newtonsCradle","Composites.newtonsCradle \u27A4 moved to newtonsCradle example"),e.car=function(a,t,i,l,f){var x=c.nextGroup(!0),y=20,d=-i*.5+y,v=i*.5-y,m=0,p=o.create({label:"Car"}),g=s.rectangle(a,t,i,l,{collisionFilter:{group:x},chamfer:{radius:l*.5},density:2e-4}),P=s.circle(a+d,t+m,f,{collisionFilter:{group:x},friction:.8}),w=s.circle(a+v,t+m,f,{collisionFilter:{group:x},friction:.8}),M=n.create({bodyB:g,pointB:{x:d,y:m},bodyA:P,stiffness:1,length:0}),S=n.create({bodyB:g,pointB:{x:v,y:m},bodyA:w,stiffness:1,length:0});return o.addBody(p,g),o.addBody(p,P),o.addBody(p,w),o.addConstraint(p,M),o.addConstraint(p,S),p},u(e,"car","Composites.car \u27A4 moved to car example"),e.softBody=function(a,t,i,l,f,x,y,d,v,m){v=r.extend({inertia:1/0},v),m=r.extend({stiffness:.2,render:{type:"line",anchors:!1}},m);var p=e.stack(a,t,i,l,f,x,function(g,P){return s.circle(g,P,d,v)});return e.mesh(p,i,l,y,m),p.label="Soft Body",p},u(e,"softBody","Composites.softBody \u27A4 moved to softBody and cloth examples")})()},function(C,B,h){var e={};C.exports=e;var o=h(3),n=h(7),r=h(12),c=h(4),s=h(13),u=h(8),a=h(5),t=h(0),i=h(1);(function(){e.create=function(l,f){var x=(l?l.mouse:null)||(f?f.mouse:null);x||(l&&l.render&&l.render.canvas?x=r.create(l.render.canvas):f&&f.element?x=r.create(f.element):(x=r.create(),t.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var y=u.create({label:"Mouse Constraint",pointA:x.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),d={type:"mouseConstraint",mouse:x,element:null,body:null,constraint:y,collisionFilter:{category:1,mask:4294967295,group:0}},v=t.extend(d,f);return c.on(l,"beforeUpdate",function(){var m=a.allBodies(l.world);e.update(v,m),e._triggerEvents(v)}),v},e.update=function(l,f){var x=l.mouse,y=l.constraint,d=l.body;if(x.button===0){if(y.bodyB)n.set(y.bodyB,!1),y.pointA=x.position;else for(var v=0;v<f.length;v++)if(d=f[v],i.contains(d.bounds,x.position)&&s.canCollide(d.collisionFilter,l.collisionFilter))for(var m=d.parts.length>1?1:0;m<d.parts.length;m++){var p=d.parts[m];if(o.contains(p.vertices,x.position)){y.pointA=x.position,y.bodyB=l.body=d,y.pointB={x:x.position.x-d.position.x,y:x.position.y-d.position.y},y.angleB=d.angle,n.set(d,!1),c.trigger(l,"startdrag",{mouse:x,body:d});break}}}else y.bodyB=l.body=null,y.pointB=null,d&&c.trigger(l,"enddrag",{mouse:x,body:d})},e._triggerEvents=function(l){var f=l.mouse,x=f.sourceEvents;x.mousemove&&c.trigger(l,"mousemove",{mouse:f}),x.mousedown&&c.trigger(l,"mousedown",{mouse:f}),x.mouseup&&c.trigger(l,"mouseup",{mouse:f}),r.clearSourceEvents(f)}})()},function(C,B,h){var e={};C.exports=e;var o=h(2),n=h(14),r=h(1),c=h(11),s=h(3);(function(){e.collides=function(u,a){for(var t=[],i=0;i<a.length;i++){var l=a[i];if(r.overlaps(l.bounds,u.bounds))for(var f=l.parts.length===1?0:1;f<l.parts.length;f++){var x=l.parts[f];if(r.overlaps(x.bounds,u.bounds)){var y=n.collides(x,u);if(y.collided){t.push(y);break}}}}return t},e.ray=function(u,a,t,i){i=i||1e-100;for(var l=o.angle(a,t),f=o.magnitude(o.sub(a,t)),x=(t.x+a.x)*.5,y=(t.y+a.y)*.5,d=c.rectangle(x,y,f,i,{angle:l}),v=e.collides(d,u),m=0;m<v.length;m+=1){var p=v[m];p.body=p.bodyB=p.bodyA}return v},e.region=function(u,a,t){for(var i=[],l=0;l<u.length;l++){var f=u[l],x=r.overlaps(f.bounds,a);(x&&!t||!x&&t)&&i.push(f)}return i},e.point=function(u,a){for(var t=[],i=0;i<u.length;i++){var l=u[i];if(r.contains(l.bounds,a))for(var f=l.parts.length===1?0:1;f<l.parts.length;f++){var x=l.parts[f];if(r.contains(x.bounds,a)&&s.contains(x.vertices,a)){t.push(l);break}}}return t}})()},function(C,B,h){var e={};C.exports=e;var o=h(4),n=h(18),r=h(0);(function(){var c,s;if(typeof window!="undefined"&&(c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame,s=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),!c){var u;c=function(a){u=setTimeout(function(){a(r.now())},1e3/60)},s=function(){clearTimeout(u)}}e.create=function(a){var t={fps:60,correction:1,deltaSampleSize:60,counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:!1,enabled:!0},i=r.extend(t,a);return i.delta=i.delta||1e3/i.fps,i.deltaMin=i.deltaMin||1e3/i.fps,i.deltaMax=i.deltaMax||1e3/(i.fps*.5),i.fps=1e3/i.delta,i},e.run=function(a,t){return typeof a.positionIterations!="undefined"&&(t=a,a=e.create()),function i(l){a.frameRequestId=c(i),l&&a.enabled&&e.tick(a,t,l)}(),a},e.tick=function(a,t,i){var l=t.timing,f=1,x,y={timestamp:l.timestamp};o.trigger(a,"beforeTick",y),a.isFixed?x=a.delta:(x=i-a.timePrev||a.delta,a.timePrev=i,a.deltaHistory.push(x),a.deltaHistory=a.deltaHistory.slice(-a.deltaSampleSize),x=Math.min.apply(null,a.deltaHistory),x=x<a.deltaMin?a.deltaMin:x,x=x>a.deltaMax?a.deltaMax:x,f=x/a.delta,a.delta=x),a.timeScalePrev!==0&&(f*=l.timeScale/a.timeScalePrev),l.timeScale===0&&(f=0),a.timeScalePrev=l.timeScale,a.correction=f,a.frameCounter+=1,i-a.counterTimestamp>=1e3&&(a.fps=a.frameCounter*((i-a.counterTimestamp)/1e3),a.counterTimestamp=i,a.frameCounter=0),o.trigger(a,"tick",y),o.trigger(a,"beforeUpdate",y),n.update(t,x,f),o.trigger(a,"afterUpdate",y),o.trigger(a,"afterTick",y)},e.stop=function(a){s(a.frameRequestId)},e.start=function(a,t){e.run(a,t)}})()},function(C,B,h){var e={};C.exports=e,h(1);var o=h(0);(function(){e.pathToVertices=function(n,r){typeof window!="undefined"&&!("SVGPathSeg"in window)&&o.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var c,s,u,a,t,i,l,f,x,y,d=[],v,m,p=0,g=0,P=0;r=r||15;var w=function(S,T,R){var E=R%2==1&&R>1;if(!x||S!=x.x||T!=x.y){x&&E?(v=x.x,m=x.y):(v=0,m=0);var F={x:v+S,y:m+T};(E||!x)&&(x=F),d.push(F),g=v+S,P=m+T}},M=function(S){var T=S.pathSegTypeAsLetter.toUpperCase();if(T!=="Z"){switch(T){case"M":case"L":case"T":case"C":case"S":case"Q":g=S.x,P=S.y;break;case"H":g=S.x;break;case"V":P=S.y;break}w(g,P,S.pathSegType)}};for(e._svgPathToAbsolute(n),u=n.getTotalLength(),i=[],c=0;c<n.pathSegList.numberOfItems;c+=1)i.push(n.pathSegList.getItem(c));for(l=i.concat();p<u;){if(y=n.getPathSegAtLength(p),t=i[y],t!=f){for(;l.length&&l[0]!=t;)M(l.shift());f=t}switch(t.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":a=n.getPointAtLength(p),w(a.x,a.y,0);break}p+=r}for(c=0,s=l.length;c<s;++c)M(l[c]);return d},e._svgPathToAbsolute=function(n){for(var r,c,s,u,a,t,i=n.pathSegList,l=0,f=0,x=i.numberOfItems,y=0;y<x;++y){var d=i.getItem(y),v=d.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(v))"x"in d&&(l=d.x),"y"in d&&(f=d.y);else switch("x1"in d&&(s=l+d.x1),"x2"in d&&(a=l+d.x2),"y1"in d&&(u=f+d.y1),"y2"in d&&(t=f+d.y2),"x"in d&&(l+=d.x),"y"in d&&(f+=d.y),v){case"m":i.replaceItem(n.createSVGPathSegMovetoAbs(l,f),y);break;case"l":i.replaceItem(n.createSVGPathSegLinetoAbs(l,f),y);break;case"h":i.replaceItem(n.createSVGPathSegLinetoHorizontalAbs(l),y);break;case"v":i.replaceItem(n.createSVGPathSegLinetoVerticalAbs(f),y);break;case"c":i.replaceItem(n.createSVGPathSegCurvetoCubicAbs(l,f,s,u,a,t),y);break;case"s":i.replaceItem(n.createSVGPathSegCurvetoCubicSmoothAbs(l,f,a,t),y);break;case"q":i.replaceItem(n.createSVGPathSegCurvetoQuadraticAbs(l,f,s,u),y);break;case"t":i.replaceItem(n.createSVGPathSegCurvetoQuadraticSmoothAbs(l,f),y);break;case"a":i.replaceItem(n.createSVGPathSegArcAbs(l,f,d.r1,d.r2,d.angle,d.largeArcFlag,d.sweepFlag),y);break;case"z":case"Z":l=r,f=c;break}(v=="M"||v=="m")&&(r=l,c=f)}}})()},function(C,B,h){var e={};C.exports=e;var o=h(5);h(0),function(){e.create=o.create,e.add=o.add,e.remove=o.remove,e.clear=o.clear,e.addComposite=o.addComposite,e.addBody=o.addBody,e.addConstraint=o.addConstraint}()}])})})(se);var Ee=he(se.exports),Le={decomp:Ie,quickDecomp:J,isSimple:Ae,removeCollinearPoints:Te,removeDuplicatePoints:Be,makeCCW:ye};function me(I,A,C){C=C||0;var B=[0,0],h,e,o,n,r,c,s;return h=I[1][1]-I[0][1],e=I[0][0]-I[1][0],o=h*I[0][0]+e*I[0][1],n=A[1][1]-A[0][1],r=A[0][0]-A[1][0],c=n*A[0][0]+r*A[0][1],s=h*r-n*e,b(s,0,C)||(B[0]=(r*o-e*c)/s,B[1]=(h*c-n*o)/s),B}function ee(I,A,C,B){var h=A[0]-I[0],e=A[1]-I[1],o=B[0]-C[0],n=B[1]-C[1];if(o*e-n*h==0)return!1;var r=(h*(C[1]-I[1])+e*(I[0]-C[0]))/(o*e-n*h),c=(o*(I[1]-C[1])+n*(C[0]-I[0]))/(n*h-o*e);return r>=0&&r<=1&&c>=0&&c<=1}function Y(I,A,C){return(A[0]-I[0])*(C[1]-I[1])-(C[0]-I[0])*(A[1]-I[1])}function q(I,A,C){return Y(I,A,C)>0}function te(I,A,C){return Y(I,A,C)>=0}function oe(I,A,C){return Y(I,A,C)<0}function $(I,A,C){return Y(I,A,C)<=0}var ge=[],pe=[];function xe(I,A,C,B){if(B){var h=ge,e=pe;h[0]=A[0]-I[0],h[1]=A[1]-I[1],e[0]=C[0]-A[0],e[1]=C[1]-A[1];var o=h[0]*e[0]+h[1]*e[1],n=Math.sqrt(h[0]*h[0]+h[1]*h[1]),r=Math.sqrt(e[0]*e[0]+e[1]*e[1]),c=Math.acos(o/(n*r));return c<B}else return Y(I,A,C)===0}function K(I,A){var C=A[0]-I[0],B=A[1]-I[1];return C*C+B*B}function L(I,A){var C=I.length;return I[A<0?A%C+C:A%C]}function de(I){I.length=0}function Z(I,A,C,B){for(var h=C;h<B;h++)I.push(A[h])}function ye(I){for(var A=0,C=I,B=1;B<I.length;++B)(C[B][1]<C[A][1]||C[B][1]===C[A][1]&&C[B][0]>C[A][0])&&(A=B);return q(L(I,A-1),L(I,A),L(I,A+1))?!1:(Se(I),!0)}function Se(I){for(var A=[],C=I.length,B=0;B!==C;B++)A.push(I.pop());for(var B=0;B!==C;B++)I[B]=A[B]}function le(I,A){return oe(L(I,A-1),L(I,A),L(I,A+1))}var Pe=[],we=[];function Ce(I,A,C){var B,h,e=Pe,o=we;if(te(L(I,A+1),L(I,A),L(I,C))&&$(L(I,A-1),L(I,A),L(I,C)))return!1;h=K(L(I,A),L(I,C));for(var n=0;n!==I.length;++n)if(!((n+1)%I.length===A||n===A)&&te(L(I,A),L(I,C),L(I,n+1))&&$(L(I,A),L(I,C),L(I,n))&&(e[0]=L(I,A),e[1]=L(I,C),o[0]=L(I,n),o[1]=L(I,n+1),B=me(e,o),K(L(I,A),B)<h))return!1;return!0}function Me(I,A,C){for(var B=0;B!==I.length;++B)if(!(B===A||B===C||(B+1)%I.length===A||(B+1)%I.length===C)&&ee(L(I,A),L(I,C),L(I,B),L(I,B+1)))return!1;return!0}function j(I,A,C,B){var h=B||[];if(de(h),A<C)for(var e=A;e<=C;e++)h.push(I[e]);else{for(var e=0;e<=C;e++)h.push(I[e]);for(var e=A;e<I.length;e++)h.push(I[e])}return h}function ne(I){for(var A=[],C=[],B=[],h=[],e=Number.MAX_VALUE,o=0;o<I.length;++o)if(le(I,o)){for(var n=0;n<I.length;++n)if(Ce(I,o,n)){C=ne(j(I,o,n,h)),B=ne(j(I,n,o,h));for(var r=0;r<B.length;r++)C.push(B[r]);C.length<e&&(A=C,e=C.length,A.push([L(I,o),L(I,n)]))}}return A}function Ie(I){var A=ne(I);return A.length>0?fe(I,A):[I]}function fe(I,A){if(A.length===0)return[I];if(A instanceof Array&&A.length&&A[0]instanceof Array&&A[0].length===2&&A[0][0]instanceof Array){for(var C=[I],B=0;B<A.length;B++)for(var h=A[B],e=0;e<C.length;e++){var o=C[e],n=fe(o,h);if(n){C.splice(e,1),C.push(n[0],n[1]);break}}return C}else{var h=A,B=I.indexOf(h[0]),e=I.indexOf(h[1]);return B!==-1&&e!==-1?[j(I,B,e),j(I,e,B)]:!1}}function Ae(I){var A=I,C;for(C=0;C<A.length-1;C++)for(var B=0;B<C-1;B++)if(ee(A[C],A[C+1],A[B],A[B+1]))return!1;for(C=1;C<A.length-2;C++)if(ee(A[0],A[A.length-1],A[C],A[C+1]))return!1;return!0}function ue(I,A,C,B,h){h=h||0;var e=A[1]-I[1],o=I[0]-A[0],n=e*I[0]+o*I[1],r=B[1]-C[1],c=C[0]-B[0],s=r*C[0]+c*C[1],u=e*c-r*o;return b(u,0,h)?[0,0]:[(c*n-o*s)/u,(e*s-r*n)/u]}function J(I,A,C,B,h,e,o){e=e||100,o=o||0,h=h||25,A=typeof A!="undefined"?A:[],C=C||[],B=B||[];var n=[0,0],r=[0,0],c=[0,0],s=0,u=0,a=0,t=0,i=0,l=0,f=0,x=[],y=[],d=I,v=I;if(v.length<3)return A;if(o++,o>e)return console.warn("quickDecomp: max level ("+e+") reached."),A;for(var m=0;m<I.length;++m)if(le(d,m)){C.push(d[m]),s=u=Number.MAX_VALUE;for(var p=0;p<I.length;++p)q(L(d,m-1),L(d,m),L(d,p))&&$(L(d,m-1),L(d,m),L(d,p-1))&&(c=ue(L(d,m-1),L(d,m),L(d,p),L(d,p-1)),oe(L(d,m+1),L(d,m),c)&&(a=K(d[m],c),a<u&&(u=a,r=c,l=p))),q(L(d,m+1),L(d,m),L(d,p+1))&&$(L(d,m+1),L(d,m),L(d,p))&&(c=ue(L(d,m+1),L(d,m),L(d,p),L(d,p+1)),q(L(d,m-1),L(d,m),c)&&(a=K(d[m],c),a<s&&(s=a,n=c,i=p)));if(l===(i+1)%I.length)c[0]=(r[0]+n[0])/2,c[1]=(r[1]+n[1])/2,B.push(c),m<i?(Z(x,d,m,i+1),x.push(c),y.push(c),l!==0&&Z(y,d,l,d.length),Z(y,d,0,m+1)):(m!==0&&Z(x,d,m,d.length),Z(x,d,0,i+1),x.push(c),y.push(c),Z(y,d,l,m+1));else{if(l>i&&(i+=I.length),t=Number.MAX_VALUE,i<l)return A;for(var p=l;p<=i;++p)te(L(d,m-1),L(d,m),L(d,p))&&$(L(d,m+1),L(d,m),L(d,p))&&(a=K(L(d,m),L(d,p)),a<t&&Me(d,m,p)&&(t=a,f=p%I.length));m<f?(Z(x,d,m,f+1),f!==0&&Z(y,d,f,v.length),Z(y,d,0,m+1)):(m!==0&&Z(x,d,m,v.length),Z(x,d,0,f+1),Z(y,d,f,m+1))}return x.length<y.length?(J(x,A,C,B,h,e,o),J(y,A,C,B,h,e,o)):(J(y,A,C,B,h,e,o),J(x,A,C,B,h,e,o)),A}return A.push(I),A}function Te(I,A){for(var C=0,B=I.length-1;I.length>3&&B>=0;--B)xe(L(I,B-1),L(I,B),L(I,B+1),A)&&(I.splice(B%I.length,1),C++);return C}function Be(I,A){for(var C=I.length-1;C>=1;--C)for(var B=I[C],h=C-1;h>=0;--h)if(Re(B,I[h],A)){I.splice(C,1);continue}}function b(I,A,C){return C=C||0,Math.abs(I-A)<=C}function Re(I,A,C){return b(I[0],A[0],C)&&b(I[1],A[1],C)}export{Ee as M,Le as s};
